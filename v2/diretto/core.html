<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns:api="http://www.ioexception.de/rest-api-doc" xmlns="http://www.w3.org/1999/xhtml">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css">
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeRDark.css" rel="stylesheet" type="text/css">
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPlain.js" type="text/javascript"></script>
<style type="text/css">
			
body {
	background: #FFF;
	color: #333;
	font: normal 100% sans-serif;
margin-left: auto;
	margin-right: auto;

	line-height: 1.5;
	width:66%;
}


.uripart {
	background:#666;
	color: #fff;
	font-style: italic;
}


h1,h2,h3,h4,h5,h6 {
	color: #444;
	font-weight: normal;
	line-height: 1;
	margin-bottom: 0.6em;
	font-family:  Helvetica, sans-serif;

}
h4,h5,h6 {font-weight: bold;}

h1 {font-size: 2.6em;}
h2 {font-size: 2em;margin-top:3em;}
h3 {font-size: 1.5em;margin-top:1.5em;}
h4 {font-size: 1.25em;}
h5 {font-size: 1.1em;}
h6 {font-size: 1em;}

h1 img, h2 img, h3 img, h4 img, h5 img, h6 img {margin: 0;}

pre {
	font: normal 100% monospace; 
}


dl { padding: 0.5em; } dt { background:#fff; float: left; clear: left; padding-left:0.3em; padding-right:0.3em;  text-align: right; }  dd { margin: 0 0 0 110px; padding: 0 0 0.5em 0; }

.statuscode, .method {
	font: bold 100% monospace; 
}

#watermark {
        position:fixed; 
        left:0px; 
        top:0px;
        width:32px;
        height:100%;
        background-color:#EEE;
        padding:0px;
        margin:0px;
} 



#watermark-text {
	color:#999;
	border:0px solid red;
	writing-mode:tb-rl;
	-webkit-transform:rotate(90deg);
	-moz-transform:rotate(90deg);
	-o-transform: rotate(90deg);
	white-space:nowrap;
	display:block;
	bottom:0px;
	width:20px;
	height:20px;
	font-family: Helvetica, sans-serif;
	letter-spacing: 5px;
	font-size:24px;
	font-weight:normal;
	text-shadow: 0px 0px 1px #999;
	padding:0 10px 10px 5px;
}

#watermark-text span{
	padding-left: 30px;
}

#sidemenu {
z-index:300;  display:none;margin: 0;  text-align:left;
}

#sidemenu  li{
	font-size: 0.8em;
}
#sidemenu  li a{
	color: #333;
	font-weight:bold;
}

#sidemenuopener{
z-index:300; color: #333; background-color: #EEEEEE; border:1px solid #DDD; margin: 0;  position: fixed; top: 16px;  left: auto;  width: 56px;  right: 0px; text-align:center;
min-height:32px;
}

#sidemenuopener a{
	color: #333;
	font-weight:bold;
}

a{
	text-decoration: none;
}

#sidemenuopenerbox{
	position: fixed; right:12px;
}

.shadow {
	-moz-box-shadow: 2px 2px 3px #333;
	-webkit-box-shadow: 2px 2px 3px #333;
	box-shadow: 2px 2px 3px #333;
	/* For IE 8 */
	-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#333333')";
	/* For IE 5.5 - 7 */
	filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#333333');
	
}


			</style>
<script type="text/javascript">
					SyntaxHighlighter.all();
			</script><script type="text/javascript">
			function showElement(layer,sx,t1,t2){
			var l = document.getElementById(layer);
			var s = document.getElementById(sx);
			if(l.style.display=="none"){
			l.style.display="block";
			l.backgroundPosition="top";
			s.innerHTML= t2;
			} else {
			l.style.display="none";
			s.innerHTML= t1;
			}
			}
			
			function boxSize(x,a,b){
				var el = document.getElementById(x);
				if(el.style.width === a){
					el.style.width = b;
				}
				else{
					el.style.width = a;
				}
			}
			
			</script>
<title>diretto Core API - RESTful API Documentation</title>
</head>
<body>
<div id="watermark">
<div id="watermark-text">
<span>diretto Core API</span><span>v2 - Draft</span>
</div>
</div>
<div id="sidemenuopener" class="shadow">
<div id="sidemenuopenerbox">
<a href="#" class="button" id="menuopener" onclick="javascript:showElement('sidemenu','menuopener','TOC','X'); boxSize('sidemenuopener','25%','56px'); return false;">TOC</a>
</div>
<ol id="sidemenu" style="display:none;">
<li>
<a id="lN69532" href="#" onclick="javascript:showElement('XN69532','lN69532','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N69532">Attachment</a>
<ol id="XN69532" style="display:none;">
<li>
<a href="#N69814">Confirm successful attachment upload</a>
</li>
<li>
<a href="#N69682">Create a new attachment</a>
</li>
<li>
<a href="#N69553">Get details of a single attachment</a>
</li>
<li>
<a href="#N69626">List all attachments of a document</a>
</li>
<li>
<a href="#N69770">Redirect to the actual attachment file</a>
</li>
</ol>
</li>
<li>
<a id="lN68003" href="#" onclick="javascript:showElement('XN68003','lN68003','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N68003">Collection</a>
<ol id="XN68003" style="display:none;">
<li>
<a href="#N68087">Add a document to a collection</a>
</li>
<li>
<a href="#N68428">Change collection data</a>
</li>
<li>
<a href="#N68021">Create a new collection</a>
</li>
<li>
<a href="#N68492">Delete a collection</a>
</li>
<li>
<a href="#N68371">Get a collection</a>
</li>
<li>
<a href="#N68202">List of collected documents (forwarder)</a>
</li>
<li>
<a href="#N68250">List of collected documents (page)</a>
</li>
<li>
<a href="#N68312">List of collections of a user</a>
</li>
<li>
<a href="#N68151">Remove a document from a collection</a>
</li>
</ol>
</li>
<li>
<a id="lN67323" href="#" onclick="javascript:showElement('XN67323','lN67323','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N67323">Comment</a>
<ol id="XN67323" style="display:none;">
<li>
<a href="#N67341">Create a new comment</a>
</li>
<li>
<a href="#N67401">Get a single comment</a>
</li>
<li>
<a href="#N67451">List of comments of a document (forward)</a>
</li>
<li>
<a href="#N67503">List of comments of a document (page)</a>
</li>
<li>
<a href="#N67562">List of comments of a user (forward)</a>
</li>
<li>
<a href="#N67614">List of comments of a user (page)</a>
</li>
</ol>
</li>
<li>
<a id="lN69872" href="#" onclick="javascript:showElement('XN69872','lN69872','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N69872">Document</a>
<ol id="XN69872" style="display:none;">
<li>
<a href="#N70383">Create a new document</a>
</li>
<li>
<a href="#N70323">Fetch multiple full documents (batch request)</a>
</li>
<li>
<a href="#N70263">Fetch snapshots of multiple documents (batch request)</a>
</li>
<li>
<a href="#N70203">Fetch the meta-data of multiple documents (batch request)</a>
</li>
<li>
<a href="#N70147">Get a single document (full)</a>
</li>
<li>
<a href="#N70036">Get a single document (meta-data only)</a>
</li>
<li>
<a href="#N70091">Get a single document (snapshot)</a>
</li>
<li>
<a href="#N69890">List of all documents (forward)</a>
</li>
<li>
<a href="#N69934">List of all documents (page)</a>
</li>
<li>
<a href="#N70472">List of documents published by a user (forward)</a>
</li>
<li>
<a href="#N70524">List of documents published by a user (page)</a>
</li>
<li>
<a href="#N69989">List of documents published since a specific date (forward)</a>
</li>
</ol>
</li>
<li>
<a id="lN65568" href="#" onclick="javascript:showElement('XN65568','lN65568','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N65568">Index</a>
<ol id="XN65568" style="display:none;">
<li>
<a href="#N65578">Get service instance data</a>
</li>
</ol>
</li>
<li>
<a id="lN68939" href="#" onclick="javascript:showElement('XN68939','lN68939','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N68939">Key-Value Pair</a>
<ol id="XN68939" style="display:none;">
<li>
<a href="#N69025">Get a key/value pair</a>
</li>
<li>
<a href="#N69125">Remove a key/value pair</a>
</li>
<li>
<a href="#N68973">Retrieve all key/value pairs for a document</a>
</li>
<li>
<a href="#N69073">Set a key/value pair</a>
</li>
</ol>
</li>
<li>
<a id="lN67676" href="#" onclick="javascript:showElement('XN67676','lN67676','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N67676">Link</a>
<ol id="XN67676" style="display:none;">
<li>
<a href="#N67690">Create a new link</a>
</li>
<li>
<a href="#N67898">List of links (forward)</a>
</li>
<li>
<a href="#N67942">List of links (page)</a>
</li>
<li>
<a href="#N67851">List of links created since a specific date (forward)</a>
</li>
<li>
<a href="#N67742">Retrieve a link</a>
</li>
<li>
<a href="#N67792">Retrieve all links containing a specific document</a>
</li>
</ol>
</li>
<li>
<a id="lN69350" href="#" onclick="javascript:showElement('XN69350','lN69350','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N69350">Location</a>
<ol id="XN69350" style="display:none;">
<li>
<a href="#N69476">Get a suggested location origin of a document</a>
</li>
<li>
<a href="#N69376">List all suggested location origins of a document</a>
</li>
<li>
<a href="#N69432">Suggest an alternative location origin for a document</a>
</li>
</ol>
</li>
<li>
<a id="lN68541" href="#" onclick="javascript:showElement('XN68541','lN68541','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N68541">Message</a>
<ol id="XN68541" style="display:none;">
<li>
<a href="#N68626">List of inbox messages received since a specific date (forward)</a>
</li>
<li>
<a href="#N68681">List of messages (forward)</a>
</li>
<li>
<a href="#N68740">List of messages (page)</a>
</li>
<li>
<a href="#N68559">Post a new message</a>
</li>
<li>
<a href="#N68877">Remove a message</a>
</li>
<li>
<a href="#N68810">Retrieve a message</a>
</li>
</ol>
</li>
<li>
<a id="lN66737" href="#" onclick="javascript:showElement('XN66737','lN66737','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N66737">Query</a>
<ol id="XN66737" style="display:none;">
<li>
<a href="#N66755">Dispatch a query</a>
</li>
<li>
<a href="#N66848">Forward to query result page</a>
</li>
<li>
<a href="#N66900">Get query result page</a>
</li>
</ol>
</li>
<li>
<a id="lN65630" href="#" onclick="javascript:showElement('XN65630','lN65630','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N65630">Service</a>
<ol id="XN65630" style="display:none;">
<li>
<a href="#N65641">Get supported media types</a>
</li>
<li>
<a href="#N65691">Get the service registry</a>
</li>
<li>
<a href="#N65742">Obtain a random UUID</a>
</li>
</ol>
</li>
<li>
<a id="lN65795" href="#" onclick="javascript:showElement('XN65795','lN65795','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N65795">Tag</a>
<ol id="XN65795" style="display:none;">
<li>
<a href="#N66052">Append a tag to a resource</a>
</li>
<li>
<a href="#N65819">Create a new tag or resolve an existing tag</a>
</li>
<li>
<a href="#N65883">Create or resolve multiple tags (batch request)</a>
</li>
<li>
<a href="#N66171">List of all tags (forward)</a>
</li>
<li>
<a href="#N66215">List of all tags (page)</a>
</li>
<li>
<a href="#N66270">List of documents using a specific tag (forward)</a>
</li>
<li>
<a href="#N66314">List of documents using a specific tag (page)</a>
</li>
<li>
<a href="#N66369">List of links using a specific tag (forward)</a>
</li>
<li>
<a href="#N66413">List of links using a specific tag (page)</a>
</li>
<li>
<a href="#N66116">Retrieve all tags of a resource</a>
</li>
<li>
<a href="#N65991">Retrieve a single tag of a resource</a>
</li>
<li>
<a href="#N65939">Retrieve a tag</a>
</li>
</ol>
</li>
<li>
<a id="lN69172" href="#" onclick="javascript:showElement('XN69172','lN69172','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N69172">Time</a>
<ol id="XN69172" style="display:none;">
<li>
<a href="#N69294">Get a suggested creation time of a document</a>
</li>
<li>
<a href="#N69194">List all suggested creation times of a document</a>
</li>
<li>
<a href="#N69250">Suggest an alternative creation time for a document</a>
</li>
</ol>
</li>
<li>
<a id="lN66962" href="#" onclick="javascript:showElement('XN66962','lN66962','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N66962">User</a>
<ol id="XN66962" style="display:none;">
<li>
<a href="#N67142">Change a user account</a>
</li>
<li>
<a href="#N67082">Create a new user account</a>
</li>
<li>
<a href="#N67260">Fetch multiple users (batch request)</a>
</li>
<li>
<a href="#N66976">List of users (forward)</a>
</li>
<li>
<a href="#N67020">List of users (page)</a>
</li>
<li>
<a href="#N67196">Retrieve user data</a>
</li>
</ol>
</li>
<li>
<a id="lN66471" href="#" onclick="javascript:showElement('XN66471','lN66471','[+]','[-]'); return false;">
						[+]
					</a> <a href="#N66471">Vote</a>
<ol id="XN66471" style="display:none;">
<li>
<a href="#N66628">Get all votes</a>
</li>
<li>
<a href="#N66559">Get a vote of the user</a>
</li>
<li>
<a href="#N66685">Undo a vote on a resource</a>
</li>
<li>
<a href="#N66510">Vote on a resource</a>
</li>
</ol>
</li>
</ol>
</div>
<h1>diretto Core API</h1>
<a name="introduction"></a>
<h2>Introduction</h2>
<h4>Version</h4>
<p>v2 - Draft</p>
<h4>Author</h4>
<p>Benjamin Erb</p>
<h4>Description</h4>
<p>The following document describe the RESTful API of the
		core services of the diretto platform. It is the only service mandatory for a deployment. 
		In most cases however (unless only using external documents), at least the Storage API will be needed as well.
		 </p>
<h4>Authentication Schemes</h4>
<p>
<ul>
<li>Basic Authentication</li>
</ul>
</p>
<h4>Base URI</h4>
<p>
<a xmlns="" href="http://core.example.foo/v2">http://core.example.foo/v2</a>
</p>
<a name="index"></a>
<h2>Index of Resources and Operations</h2>
<ol>
<li xmlns="http://www.w3.org/1999/xhtml">
<a href="#N69532">Attachment</a>
<ol>
<li>
<a href="#N69814">Confirm successful attachment upload</a>
</li>
<li>
<a href="#N69682">Create a new attachment</a>
</li>
<li>
<a href="#N69553">Get details of a single attachment</a>
</li>
<li>
<a href="#N69626">List all attachments of a document</a>
</li>
<li>
<a href="#N69770">Redirect to the actual attachment file</a>
</li>
</ol>
</li>
<li>
<a href="#N68003">Collection</a>
<ol>
<li>
<a href="#N68087">Add a document to a collection</a>
</li>
<li>
<a href="#N68428">Change collection data</a>
</li>
<li>
<a href="#N68021">Create a new collection</a>
</li>
<li>
<a href="#N68492">Delete a collection</a>
</li>
<li>
<a href="#N68371">Get a collection</a>
</li>
<li>
<a href="#N68202">List of collected documents (forwarder)</a>
</li>
<li>
<a href="#N68250">List of collected documents (page)</a>
</li>
<li>
<a href="#N68312">List of collections of a user</a>
</li>
<li>
<a href="#N68151">Remove a document from a collection</a>
</li>
</ol>
</li>
<li>
<a href="#N67323">Comment</a>
<ol>
<li>
<a href="#N67341">Create a new comment</a>
</li>
<li>
<a href="#N67401">Get a single comment</a>
</li>
<li>
<a href="#N67451">List of comments of a document (forward)</a>
</li>
<li>
<a href="#N67503">List of comments of a document (page)</a>
</li>
<li>
<a href="#N67562">List of comments of a user (forward)</a>
</li>
<li>
<a href="#N67614">List of comments of a user (page)</a>
</li>
</ol>
</li>
<li>
<a href="#N69872">Document</a>
<ol>
<li>
<a href="#N70383">Create a new document</a>
</li>
<li>
<a href="#N70323">Fetch multiple full documents (batch request)</a>
</li>
<li>
<a href="#N70263">Fetch snapshots of multiple documents (batch request)</a>
</li>
<li>
<a href="#N70203">Fetch the meta-data of multiple documents (batch request)</a>
</li>
<li>
<a href="#N70147">Get a single document (full)</a>
</li>
<li>
<a href="#N70036">Get a single document (meta-data only)</a>
</li>
<li>
<a href="#N70091">Get a single document (snapshot)</a>
</li>
<li>
<a href="#N69890">List of all documents (forward)</a>
</li>
<li>
<a href="#N69934">List of all documents (page)</a>
</li>
<li>
<a href="#N70472">List of documents published by a user (forward)</a>
</li>
<li>
<a href="#N70524">List of documents published by a user (page)</a>
</li>
<li>
<a href="#N69989">List of documents published since a specific date (forward)</a>
</li>
</ol>
</li>
<li>
<a href="#N65568">Index</a>
<ol>
<li>
<a href="#N65578">Get service instance data</a>
</li>
</ol>
</li>
<li>
<a href="#N68939">Key-Value Pair</a>
<ol>
<li>
<a href="#N69025">Get a key/value pair</a>
</li>
<li>
<a href="#N69125">Remove a key/value pair</a>
</li>
<li>
<a href="#N68973">Retrieve all key/value pairs for a document</a>
</li>
<li>
<a href="#N69073">Set a key/value pair</a>
</li>
</ol>
</li>
<li>
<a href="#N67676">Link</a>
<ol>
<li>
<a href="#N67690">Create a new link</a>
</li>
<li>
<a href="#N67898">List of links (forward)</a>
</li>
<li>
<a href="#N67942">List of links (page)</a>
</li>
<li>
<a href="#N67851">List of links created since a specific date (forward)</a>
</li>
<li>
<a href="#N67742">Retrieve a link</a>
</li>
<li>
<a href="#N67792">Retrieve all links containing a specific document</a>
</li>
</ol>
</li>
<li>
<a href="#N69350">Location</a>
<ol>
<li>
<a href="#N69476">Get a suggested location origin of a document</a>
</li>
<li>
<a href="#N69376">List all suggested location origins of a document</a>
</li>
<li>
<a href="#N69432">Suggest an alternative location origin for a document</a>
</li>
</ol>
</li>
<li>
<a href="#N68541">Message</a>
<ol>
<li>
<a href="#N68626">List of inbox messages received since a specific date (forward)</a>
</li>
<li>
<a href="#N68681">List of messages (forward)</a>
</li>
<li>
<a href="#N68740">List of messages (page)</a>
</li>
<li>
<a href="#N68559">Post a new message</a>
</li>
<li>
<a href="#N68877">Remove a message</a>
</li>
<li>
<a href="#N68810">Retrieve a message</a>
</li>
</ol>
</li>
<li>
<a href="#N66737">Query</a>
<ol>
<li>
<a href="#N66755">Dispatch a query</a>
</li>
<li>
<a href="#N66848">Forward to query result page</a>
</li>
<li>
<a href="#N66900">Get query result page</a>
</li>
</ol>
</li>
<li>
<a href="#N65630">Service</a>
<ol>
<li>
<a href="#N65641">Get supported media types</a>
</li>
<li>
<a href="#N65691">Get the service registry</a>
</li>
<li>
<a href="#N65742">Obtain a random UUID</a>
</li>
</ol>
</li>
<li>
<a href="#N65795">Tag</a>
<ol>
<li>
<a href="#N66052">Append a tag to a resource</a>
</li>
<li>
<a href="#N65819">Create a new tag or resolve an existing tag</a>
</li>
<li>
<a href="#N65883">Create or resolve multiple tags (batch request)</a>
</li>
<li>
<a href="#N66171">List of all tags (forward)</a>
</li>
<li>
<a href="#N66215">List of all tags (page)</a>
</li>
<li>
<a href="#N66270">List of documents using a specific tag (forward)</a>
</li>
<li>
<a href="#N66314">List of documents using a specific tag (page)</a>
</li>
<li>
<a href="#N66369">List of links using a specific tag (forward)</a>
</li>
<li>
<a href="#N66413">List of links using a specific tag (page)</a>
</li>
<li>
<a href="#N66116">Retrieve all tags of a resource</a>
</li>
<li>
<a href="#N65991">Retrieve a single tag of a resource</a>
</li>
<li>
<a href="#N65939">Retrieve a tag</a>
</li>
</ol>
</li>
<li>
<a href="#N69172">Time</a>
<ol>
<li>
<a href="#N69294">Get a suggested creation time of a document</a>
</li>
<li>
<a href="#N69194">List all suggested creation times of a document</a>
</li>
<li>
<a href="#N69250">Suggest an alternative creation time for a document</a>
</li>
</ol>
</li>
<li>
<a href="#N66962">User</a>
<ol>
<li>
<a href="#N67142">Change a user account</a>
</li>
<li>
<a href="#N67082">Create a new user account</a>
</li>
<li>
<a href="#N67260">Fetch multiple users (batch request)</a>
</li>
<li>
<a href="#N66976">List of users (forward)</a>
</li>
<li>
<a href="#N67020">List of users (page)</a>
</li>
<li>
<a href="#N67196">Retrieve user data</a>
</li>
</ol>
</li>
<li>
<a href="#N66471">Vote</a>
<ol>
<li>
<a href="#N66628">Get all votes</a>
</li>
<li>
<a href="#N66559">Get a vote of the user</a>
</li>
<li>
<a href="#N66685">Undo a vote on a resource</a>
</li>
<li>
<a href="#N66510">Vote on a resource</a>
</li>
</ol>
</li>
</ol>
<a xmlns="" name="N69532"></a>
<h2 class="resource">1. Attachment</h2>
<h4>Description</h4>
<p>An attachment represents an actual resource or media, while a document is only a conceptual item in the terms of diretto.
			Thus, each document has at least one attachment - the file/resource submitted when the document has been created.
			However, the platform allows users to add other attachments to any documents. While the first attachment is normally unaltered, raw footage,
			additional attachments are often resized, processed or enhanced variants of the original file, providing additional use.   
			There are up to three groups of individuals involved in attachments. Any attachment has a publisher. This is always a registered platform user
			and the one who acutally adds the attachment to the platform. Furthermore, there are creators and contributors. Each attachment can have
			multiple (and also no) entires for creators and contributors. Each entry is either a referencing a  registered platform user or an external person.
			An external person has always a name, and may have an additional hyperlink to provide background information.
			Generally, two different kinds of attachments can be created (depending on the service configuration). When there is a Storage API service
			available, media files can be uploaded and stored on the platform itself. Alternatively, existing resource in the web can be used
			by using the type <span style="font-family:monospace;">external</span>. Then, only a hyperlink reference to the resource is stored. The actual types allowed are depending on
			the platform configuration and can be retrieved at the service resource.
			</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/attachment/<span class="uripart">{attach-id}</span>
</pre>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">attach-id</dt>
<dd>attachment ID</dd>
</dl>
<a name="N69814"></a>
<h3 class="operation">1.1 Confirm successful attachment upload</h3>
<h4>Description</h4>When a client has uploaded a new attachment to the Storage API, the service will emit
				a token in the response to the upload. It is necessary to confirm the successful upload towards the Core API. 
				In order to approve the attachment upload, the client must use this token and delete a lock
				pending on the attachment resource.  
				Please note: This step is only necessary for attachments uploaded to the Storage API, it is not needed
				for external attachments.
				<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/attachment/<span class="uripart">{attach-id}</span>/lock?token=<span class="uripart">{token}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">attach-id</dt>
<dd>attachment ID</dd>
<dt class="uripart">{token}</dt>
<dd>confirmation token</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">DELETE</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>Lock removed</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Superfluous confirmation</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Invalid token</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document/attachment not found</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N69682"></a>
<h3 class="operation">1.2 Create a new attachment</h3>
<h4>Description</h4>Adds a new attachment to a document. Please note that this API call is not used
				for the creation of an initial attachment of a document. It can only be used for adding alternative
				submissions to a given document.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/attachments</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "title":"A cool image of fubar",
   "description":"yada yada",
   "mimeType":"image/jpeg",
   "fileSize":123456,
   "license":"",
   "contributors":[

   ],
   "creators":[

   ]
}</pre>
						This request will create a new attachment with a media file. It must be stored by 
						Storage API in a later step.
						
						
<pre class="brush: js">{
   "title":"A cool image of fubar",
   "description":"yada yada",
   "mimeType":"image/x-diretto-twitpix+url",
   "external":"http://twitpix.foo/135xa",
   "license":"Creative Commons Attribution-ShareAlike 3.0 Unported - Deed",
   "contributors":[

   ],
   "creators":[
      {
         "user":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/user/123456"
            }
         }
      }
   ]
}</pre>
						However, this request adds a new external resource as an attachment. If the external resource
						is validated, the attachment creation directly succeeds in this call.
																	
					<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>(External) attachment accepted, attachment created.</dd>
<dt class="statuscode">202 Accepted</dt>
<dd>Attachment accepted, uploading credentials in response</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid meta data</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "link":{
      "rel":"self",
      "href":"http://core.example.foo/document/d16e103e-4fda-433d-9309-179487ecad4a/attachment/d16e103e-4fda-433d-9309-179487ecad4a"
   },
   "upload":{
      "token":"00b19c9d7db4f1ae0824c62bda5a127588bde476",
      "location":{
         "link":{
            "rel":"self",
            "href":"http://storage.example.foo/d16e103e-4fda-433d-9309-179487ecad4a/d16e103e-4fda-433d-9309-179487ecad4a.jpg"
         }
      },
      "target":{
         "link":{
            "rel":"self",
            "href":"http://storage.example.foo/d16e103e-4fda-433d-9309-179487ecad4a/d16e103e-4fda-433d-9309-179487ecad4a.jpg?token=00b19c9d7db4f1ae0824c62bda5a127588bde476"
         }
      }
   }
}</pre>
						When submitting valid attachment meta data for a file to be stored, 
						the response contains the token and designated location for the upload
						
					<a name="N69553"></a>
<h3 class="operation">1.3 Get details of a single attachment</h3>
<h4>Description</h4>Returns a detailed attachment overview.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/attachment/<span class="uripart">{attach-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">attach-id</dt>
<dd>attachment ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Attachment details in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document/Attachment not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "attachment":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66"
      },
      "title":"A cool image of fubar",
      "description":"yada yada",
      "publishedTime":"2010-07-17T18:54:11.939Z",
      "publisher":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "mimeType":"image/jpeg",
      "file":{
         "size":132456,
         "link":{
            "rel":"self",
            "href":"http://storage.example.foo/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66.jpg"
         }
      },
      "votes":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66/votes"
         },
         "up":12,
         "down":2
      },
      "license":"Creative Commons Attribution-ShareAlike 3.0 Unported - Deed",
      "contributors":[

      ],
      "creators":[
          {
            "user":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/007007"
               }
            }
         }
      ]
   }
}</pre>
						
						An attachment stored on the platform (<span style="font-family:monospace;">file</span> attribute is present). The document has been created and uploaded (published) by user with id 123456. Not contributors are listed and the license is identified by a using a text.
						
<pre class="brush: js">{
   "attachment":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/c4139f47-a90e-4b37-aec1-1f1b3aae9e3c"
      },
      "title":"A cool image of fubar",
      "description":"yada yada",
      "publishedTime":"2010-07-17T18:54:11.939Z",
      "publisher":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "mimeType":"image/x-diretto-twitpix+url",
      "external":{
         "link":{
            "rel":"self",
            "href":"http://twitpix.foo/135xa"
         }
      },
      "votes":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/c4139f47-a90e-4b37-aec1-1f1b3aae9e3c/votes"
         },
         "up":12,
         "down":2
      },
      "license":"http://creativecommons.org/licenses/by-sa/3.0/de/",
      "contributors":[
         {
            "external":{
               "name":"Alice",
               "link":null
            }
         },
         {
            "user":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/789012"
               }
            }
         }
      ],
      "creators":[
         {
            "user":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/007007"
               }
            }
         }
      ]
   }
}</pre>
						
						Another attachment with an external resource (<span style="font-family:monospace;">external</span> attribute is present and contains the hyperlink, no <span style="font-family:monospace;">file</span> attribute present). The entry has been uploaded (published) by user with id 123456, created by one external person and lists two contributors. One of them is an external person (Alice, with unknown hyperlink), the other one a registered platform user. The license is identified using a link.
					<a name="N69626"></a>
<h3 class="operation">1.4 List all attachments of a document</h3>
<h4>Description</h4>Returns a list of all attachments of the given document. 
				The list will only show attachments successfully uploaded. Pending uploads will not be shown until 
				the lock has been removed by the uploader upon successful submission. 
				Please note that is a non-paginated list, thus all attachments are listed in the response.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/attachments</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List of attachments in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "attachments":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachments"
      },
      "list":[
         {
            "attachment":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66"
               },
               "title":"A cool image of fubar",
               "description":"yada yada",
               "publishedTime":"2010-07-17T18:54:11.939Z",
               "publisher":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/user/123456"
                  }
               },
               "mimeType":"image/jpeg",
               "file":{
                  "size":132456,
                  "link":{
                     "rel":"self",
                     "href":"http://storage.example.foo/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66.jpg"
                  }
               },
               "votes":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66/votes"
                  },
                  "up":12,
                  "down":2
               },
               "license":"Creative Commons Attribution-ShareAlike 3.0 Unported - Deed",
               "contributors":[

               ],
               "creators":[
	                 {
	                    "user":{
	                       "link":{
	                          "rel":"self",
	                          "href":"http://core.example.foo/v2/user/123456"
	                       }
	                    }
	                 }
               ]
            }
         },
         {
            "attachment":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/c4139f47-a90e-4b37-aec1-1f1b3aae9e3c"
               },
               "title":"A cool image of fubar",
               "description":"yada yada",
               "publishedTime":"2010-07-17T18:54:11.939Z",
               "publisher":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/user/123456"
                  }
               },
               "mimeType":"image/x-diretto-twitpix+url",
               "external":{
                  "link":{
                     "rel":"self",
                     "href":"http://twitpix.foo/135xa"
                  }
               },
               "votes":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/c4139f47-a90e-4b37-aec1-1f1b3aae9e3c/votes"
                  },
                  "up":12,
                  "down":2
               },
               "license":"http://creativecommons.org/licenses/by-sa/3.0/de/",
               "contributors":[
                  {
                     "external":{
                        "name":"Alice",
                        "link":null
                     }
                  },
                  {
                     "user":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/user/789012"
                        }
                     }
                  }
               ],
               "creators":[
                  {
                     "user":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/user/007007"
                        }
                     }
                  }
               ]
            }
         }
      ]
   }
}</pre>
						
					
<a name="N69770"></a>
<h3 class="operation">1.5 Redirect to the actual attachment file</h3>
<h4>Description</h4>Redirects the request to the raw file of the attachment. If the attachment is stored
				on the platform, the request will be redirected to the correct URI of the Storage API.
				If the attachment is of type external, the request will be redirected to the external URI. 
				<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/attachment/<span class="uripart">{attach-id}</span>/file</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">attach-id</dt>
<dd>attachment ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>varying</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">301 Moved Permanently</dt>
<dd>Location header contains the URI of the attachment file</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document/attachment not found</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68003"></a>
<h2 class="resource">2. Collection</h2>
<h4>Description</h4>
<p>This resource represents a collection of documents that a user can create and maintain personally. Users can 
			set a collection to nonpublic or public. Once a collection is private, only the user who created the collection
			can see the collection. When the user changes the private setting, this only affects all subsequent views. 
			Either way the creator of a collection is the only one who can add new documents to a collection.</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collection/<span class="uripart">{collection-id}</span>
</pre>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">collection-id</dt>
<dd>collection ID</dd>
</dl>
<a name="N68087"></a>
<h3 class="operation">2.1 Add a document to a collection</h3>
<h4>Description</h4>Takes an existing document from the platform and attaches it to the collection.  
				Note that only the creator can add documents to a collection.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collection/<span class="uripart">{collection-id}</span>/documents</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">collection-id</dt>
<dd>collection ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "document":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/550e8400-e29b-11d4-a716-446655440000"
      }
   }
}</pre>
											
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">202 Accepted</dt>
<dd>Document added.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid document data.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found.</dd>
<dt class="statuscode">409 Conflict</dt>
<dd>Document is already in this collection.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68428"></a>
<h3 class="operation">2.2 Change collection data</h3>
<h4>Description</h4>Updates the collection meta data<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collection/<span class="uripart">{collection-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">collection-id</dt>
<dd>collection ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">PUT</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "title":"My Favorite Documents of Event X",
   "description":"This is a list of the coolest documents that show what happend during event X",
   "nonpublic":false
}</pre>
							Note that the <span style="font-family:monospace;">private</span> flag must be set.
											
					<h4>Responses</h4>
<dl>
<dt class="statuscode">202 Accepted</dt>
<dd>Collection in response entity.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid update data.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed, collection is private.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Collection not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68021"></a>
<h3 class="operation">2.3 Create a new collection</h3>
<h4>Description</h4>Creates a new collection for this user.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collections</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "title":"My Favorite Documents of Event X",
   "description":"This is a list of the coolest documents that show what happend during event X",
   "nonpublic":false
}</pre>
							Note that the <span style="font-family:monospace;">nonpublic</span> flag must be set.
											
					<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>Collection created, ID in location haeader</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid collection data.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68492"></a>
<h3 class="operation">2.4 Delete a collection</h3>
<h4>Description</h4>Removes a collection. Only the owner of a collection can do this. Warning: This operation cannot be undone.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collection/<span class="uripart">{collection-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">collection-id</dt>
<dd>collection ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">DELETE</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>Collection deleted.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed, collection is private.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Collection not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68371"></a>
<h3 class="operation">2.5 Get a collection</h3>
<h4>Description</h4>Returns a collection, if public, or the requesting user is the owner.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collection/<span class="uripart">{collection-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">collection-id</dt>
<dd>collection ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Collection in response entity.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed, collection is private.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>User or collection not found.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "collection":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/user/123456/collection/5330edf0-a68d-11e0-8264-0800200c9a66"
      },
      "title":"My Favorite Documents of Event X",
      "description":"This is a list of the coolest documents that show what happend during event X",
      "creationTime":"2010-07-17T18:54:11.939Z",
      "creator":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "nonpublic":false,
      "documents":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456/collection/5330edf0-a68d-11e0-8264-0800200c9a66/documents"
         }
      }
   }
}</pre>
							The response contains all meta data of the collection. However, the documents available in the collection must be fetched using the paginated list in additional calls.
											
					<a name="N68202"></a>
<h3 class="operation">2.6 List of collected documents (forwarder)</h3>
<h4>Description</h4>Forwards to a cursored list of documents of this collection. Only possible if collection is public.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collection/<span class="uripart">{collection-id}</span>/documents</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">collection-id</dt>
<dd>collection ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>Collection is empty.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to first page</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed, when collection is private.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68250"></a>
<h3 class="operation">2.7 List of collected documents (page)</h3>
<h4>Description</h4>Forwards to a cursored list of documents of this collection. Only possible if collection is not private.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collection/<span class="uripart">{collection-id}</span>/documents/cursor/<span class="uripart">{cursor-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">collection-id</dt>
<dd>collection ID</dd>
<dt class="uripart">{cursor-id}</dt>
<dd>the document ID used as cursor</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Page in response.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed, when collection is private.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/user/123456/collection/5330edf0-a68d-11e0-8264-0800200c9a66/documents/cursor/550e8400-e29b-11d4-a716-446655440000"
      }
   },
   "list":[
      {
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/550e8400-e29b-11d4-a716-446655440000"
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/user/123456/collection/5330edf0-a68d-11e0-8264-0800200c9a66/documents/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/user/123456/collection/5330edf0-a68d-11e0-8264-0800200c9a66/documents/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
							The response contains all meta data of the collection. However, the documents available in the collection must be fetched using the paginated list in additional calls.
											
					<a name="N68312"></a>
<h3 class="operation">2.8 List of collections of a user</h3>
<h4>Description</h4>List all public collections of a user. If the user running this request is also the owner of the collections, also private collections will be listed.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collections</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Collection list in response.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>User not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "collections":[
      {
         "collection":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/user/123456/collection/5330edf0-a68d-11e0-8264-0800200c9a66"
            },
            "title":"My Favorite Documents of Event X",
            "description":"This is a list of the coolest documents that show what happend during event X",
            "creationTime":"2010-07-17T18:54:11.939Z",
            "creator":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "nonpublic":false,
            "documents":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456/collection/5330edf0-a68d-11e0-8264-0800200c9a66/documents"
               }
            }
         }
      }
   ]
}</pre>
							The response contains all meta data of the collection. However, the documents available in the collection must be fetched using the paginated list in additional calls.
											
					<a name="N68151"></a>
<h3 class="operation">2.9 Remove a document from a collection</h3>
<h4>Description</h4>Removes a document from a collection. 
				Note that only the creator can add documents to a collection.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/collection/<span class="uripart">{collection-id}</span>/document/<span class="uripart">{entry-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">collection-id</dt>
<dd>collection ID</dd>
<dt class="uripart">{entry-id}</dt>
<dd>Entry ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">DELETE</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>Document removed.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67323"></a>
<h2 class="resource">3. Comment</h2>
<h4>Description</h4>
<p>Comments allow users to debate about the content, value and impact of a document.</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/comment/<span class="uripart">{comment-id}</span>
</pre>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">comment-id</dt>
<dd>comment ID</dd>
</dl>
<a name="N67341"></a>
<h3 class="operation">3.1 Create a new comment</h3>
<h4>Description</h4>Adds a new comment to the task.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/comments</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						
							
<pre class="brush: js">
{
   "content":"blablabla"
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>Comment has been created.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid comment data (i.e. length).</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67401"></a>
<h3 class="operation">3.2 Get a single comment</h3>
<h4>Description</h4>Returns the full comment.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/comment/<span class="uripart">{comment-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">comment-id</dt>
<dd>comment ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Comment is available in response entity.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Comment not found.</dd>
</dl>
<h4>Response Entities</h4>
						
							
<pre class="brush: js">
{
   "comment":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66"
      },
      "content":"blablabla",
      "creationTime":"2010-07-17T18:54:11.939Z",
      "creator":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "votes":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66/votes"
         },
         "up":12,
         "down":2
      }
   }
}</pre>
													
					
<a name="N67451"></a>
<h3 class="operation">3.3 List of comments of a document (forward)</h3>
<h4>Description</h4>Forwards to a paginated list of comments that have been added to the document.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/comments</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No comments available yet</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Location header contains link to first page of comments</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67503"></a>
<h3 class="operation">3.4 List of comments of a document (page)</h3>
<h4>Description</h4>Returns a list of all comments bound to the document.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/comments/cursor/<span class="uripart">{comment-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document id</dd>
<dt class="uripart">{comment-id}</dt>
<dd>comment id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Page in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Cursor not found</dd>
</dl>
<h4>Response Entities</h4>
						
							
<pre class="brush: js">
{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments/cursor/8e252710-77cf-11e0-a1f0-0800200c9a66"
      }
   },
   "list":[
      {
         "comment":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66"
            },
            "content":"blablabla",
            "creationTime":"2010-07-17T18:54:11.939Z",
            "creator":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "votes":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66/votes"
               },
               "up":12,
               "down":2
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
													
					
<a name="N67562"></a>
<h3 class="operation">3.5 List of comments of a user (forward)</h3>
<h4>Description</h4>Forwards to a paginated list of comments that have been written by the user.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/comments</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No comments available yet</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Location header contains link to first page of comments</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>User not found</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67614"></a>
<h3 class="operation">3.6 List of comments of a user (page)</h3>
<h4>Description</h4>Returns a list of all comments made by a user<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/comments/cursor/<span class="uripart">{comment-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
<dt class="uripart">{comment-id}</dt>
<dd>comment id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Page in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Cursor not found</dd>
</dl>
<h4>Response Entities</h4>
						
							
<pre class="brush: js">
{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/user/comments/cursor/8e252710-77cf-11e0-a1f0-0800200c9a66"
      }
   },
   "list":[
      {
         "comment":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66"
            },
            "content":"blablabla",
            "creationTime":"2010-07-17T18:54:11.939Z",
            "creator":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "votes":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66/votes"
               },
               "up":12,
               "down":2
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/user/comments/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/user/comments/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
													
					
<a name="N69872"></a>
<h2 class="resource">4. Document</h2>
<h4>Description</h4>
<p>Documents are the primary resource of the diretto platform. For diretto, the conceptual entity of a document
			has been separated from actual media files. The latter are known as attachments. Obviously, a document must always have at
			least on attachment, which is the media file associated with the document creation. Additional attachments can the be added, too.
			The conceptual entity of a document has additional attributes that can be added by the community. This includes comments,
			tags, links between documents and alternative suggestions for time and location of the original document creation.
			The system also distinguishes between the person who is publishing the document on the platform, persons who originally
			created or authored the document and persons that might have contributed to its creation.  
			
			
	The following flow shows the steps involved when creating a new document including the initial attachment (not external).
	<pre class="brush: plain">
   Client         Core API Server      Storage API Server

     |                    |                   |
     |                    |                   |
     | (1) POST Metadata  |                   |
     |-------------------&gt;|                   |
     |                    |                   |
     | (2) 202 + Location |                   |
     |&lt;-------------------|                   |
     |                    |                   |
     | (3) PUT/POST Entity (signed URI)       |
     |--------------------+------------------&gt;|
     |                    |                   |
     | (4) 201 Created + Accept Key in Body   |
     |&lt;-------------------+-------------------|
     |                    |                   |
     | (5) DELETE Lock (via Accept Key)       |
     |-------------------&gt;|                   |
     |                    |                   |
     | (6) 204            |                   |
     |&lt;-------------------|                   |
     |                    |                   |
     |                    |                   |
</pre>					
			
			
</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>
</pre>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
</dl>
<a name="N70383"></a>
<h3 class="operation">4.1 Create a new document</h3>
<h4>Description</h4>Creates a new document.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">PUT</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "title":"A cool image of fubar",
   "description":"yada yada",
   "mimeType":"image/x-diretto-twitpix+url",
   "external":"http://twitpix.foo/135xa",
   "license":"Creative Commons Attribution-ShareAlike 3.0 Unported - Deed",
   "location":{
      "position":{
         "type":"Point",
         "coordinates":[
            9.991246,
            48.39848
         ]
      },
      "variance":100
   },
   "createdBetween":{
      "after":"2010-06-29T19:00:00.000Z",
      "before":"2010-06-29T20:00:00.000Z"
   },
   "contributors":[

   ],
   "creators":[
      {
         "user":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/user/123456"
            }
         }
      }
   ]
}</pre>
						This will create a new document with the given meta data. Due to the 
						mime type and the <span style="font-family:monospace;">external</span> attribute, the included first attachment will be
						an external attachment.
						
						
<pre class="brush: js">{
   "title":"A cool image of fubar",
   "description":"yada yada",
   "mimeType":"image/jpeg",
   "fileSize":123456,
   "license":"",
   "location":{
      "position":{
         "type":"Point",
         "coordinates":[
            9.991246,
            48.39848
         ]
      },
      "variance":100
   },
   "createdBetween":{
      "after":"2010-06-29T19:00:00.000Z",
      "before":"2010-06-29T20:00:00.000Z"
   },
   "contributors":[

   ],
   "creators":[

   ]
}</pre>
						This will create a new document with the given meta data. Due to the 
						mime type and the <span style="font-family:monospace;">fileSize</span> attribute, the included first attachment will be
						an attachment to be stored on the platform. Therefore, the response will contain
						upload credentials, if the document will be accepted.
												
					<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>New document created (only for external attachments).</dd>
<dt class="statuscode">202 Accepted</dt>
<dd>New document has been accepted, credentials for upload in response (only for attachments to be stored).</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid or incomplete values.</dd>
<dt class="statuscode">409 Conflict</dt>
<dd>Document already exists.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "link":{
      "rel":"self",
      "href":"http://core.example.foo/v2/document/d16e103e-4fda-433d-9309-179487ecad4a"
   },
   "upload":{
      "token":"00b19c9d7db4f1ae0824c62bda5a127588bde476",
      "location":{
         "link":{
            "rel":"self",
            "href":"http://storage.example.foo/d16e103e-4fda-433d-9309-179487ecad4a/d16e103e-4fda-433d-9309-179487ecad4a.jpg"
         }
      },
      "target":{
         "link":{
            "rel":"self",
            "href":"http://storage.example.foo/d16e103e-4fda-433d-9309-179487ecad4a/d16e103e-4fda-433d-9309-179487ecad4a.jpg?token=00b19c9d7db4f1ae0824c62bda5a127588bde476"
         }
      }
   }
}</pre>
						If the attached file is not external and must be stored on the platform, the document creation request will
						return a token and a designated token where to upload the attachment in the next step.
						
					<a name="N70323"></a>
<h3 class="operation">4.2 Fetch multiple full documents (batch request)</h3>
<h4>Description</h4>Given a list of document URIs, it returns a list containing details for each document (full type).
				Please note that this is an expensive operation in terms of data to be collected for the response and also data
				to be sent over the network. Thus, please use this API call responsibly and prefer the other document request types,
				if appropriate.				
				<h4>URI</h4>
<pre>http://core.example.foo/v2/documents/full</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "documents":[
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66",
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-00000invalid"
   ]
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Results in response body. Note that tasks may still have raised errors (i.e. when not found).</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid query or too many items requested.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "results":{
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-00000invalid":{
         "error":{
            "reason":"Not found"
         }
      },
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66":{
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66"
            },
            "mediaType":"image",
            "publishedTime":"2010-07-17T18:54:11.939Z",
            "publisher":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "title":"A cool image of fubar",
            "description":"&hellip;",
            "comments":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments"
               },
               "list":[
                  {
                     "comment":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66"
                        },
                        "content":"blablabla",
                        "creationTime":"2010-07-17T18:54:11.939Z",
                        "creator":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/123456"
                           }
                        },
                        "votes":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66/votes"
                           },
                           "up":12,
                           "down":2
                        }
                     }
                  }
               ]
            },
            "tags":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tags"
               },
               "list":[
                  {
                     "tag":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                        },
                        "baseTag":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                           }
                        },
                        "value":"mytag",
                        "creationTime":"2010-07-17T18:54:11.939Z",
                        "creator":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/123456"
                           }
                        },
                        "votes":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                           },
                           "up":12,
                           "down":2
                        }
                     }
                  }
               ]
            },
            "attachments":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachments"
               },
               "list":[
                  {
                     "attachment":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66"
                        },
                        "title":"A cool image of fubar",
                        "description":"yada yada",
                        "publishedTime":"2010-07-17T18:54:11.939Z",
                        "publisher":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/123456"
                           }
                        },
                        "mimeType":"image/jpeg",
                        "file":{
                           "size":132456,
                           "link":{
                              "rel":"self",
                              "href":"http://storage.example.foo/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66.jpg"
                           }
                        },
                        "votes":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66/votes"
                           },
                           "up":12,
                           "down":2
                        },
                        "license":"Creative Commons Attribution-ShareAlike 3.0 Unported - Deed",
                        "contributors":[

                        ],
                        "creators":[
                           {
                              "user":{
                                 "link":{
                                    "rel":"self",
                                    "href":"http://core.example.foo/v2/user/123456"
                                 }
                              }
                           }
                        ]
                     }
                  },
                  {
                     "attachment":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/c4139f47-a90e-4b37-aec1-1f1b3aae9e3c"
                        },
                        "title":"A cool image of fubar",
                        "description":"yada yada",
                        "publishedTime":"2010-07-17T18:54:11.939Z",
                        "publisher":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/123456"
                           }
                        },
                        "mimeType":"image/x-diretto-twitpix+url",
                        "external":{
                           "link":{
                              "rel":"self",
                              "href":"http://twitpix.foo/135xa"
                           }
                        },
                        "votes":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/c4139f47-a90e-4b37-aec1-1f1b3aae9e3c/votes"
                           },
                           "up":12,
                           "down":2
                        },
                        "license":"http://creativecommons.org/licenses/by-sa/3.0/de/",
                        "contributors":[
                           {
                              "external":{
                                 "name":"Alice",
                                 "link":null
                              }
                           },
                           {
                              "user":{
                                 "link":{
                                    "rel":"self",
                                    "href":"http://core.example.foo/v2/user/789012"
                                 }
                              }
                           }
                        ],
                        "creators":[
                           {
                              "user":{
                                 "link":{
                                    "rel":"self",
                                    "href":"http://core.example.foo/v2/user/007007"
                                 }
                              }
                           }
                        ]
                     }
                  }
               ]
            },
            "locations":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/locations"
               },
               "list":[
                  {
                     "location":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/location/48.39848,9.991246,100"
                        },
                        "position":{
                           "type":"Point",
                           "coordinates":[
                              9.991246,
                              48.39848
                           ]
                        },
                        "variance":100,
                        "creationTime":"2010-07-17T18:54:11.939Z",
                        "creator":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/123456"
                           }
                        },
                        "votes":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/location/48.39848,9.991246,100/votes"
                           },
                           "up":4,
                           "down":1
                        }
                     }
                  }
               ]
            },
            "times":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/times"
               },
               "list":[
                  {
                     "time":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/time/2010-06-29T19:00:00.000Z--2010-06-29T20:00:00.000Z"
                        },
                        "between":{
                           "after":"2010-06-29T19:00:00.000Z",
                           "before":"2010-06-29T20:00:00.000Z"
                        },
                        "creationTime":"2010-07-17T18:54:11.939Z",
                        "creator":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/123456"
                           }
                        },
                        "votes":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/time/2010-06-29T19:15:50.000Z--2010-06-29T19:15:50.000Z/votes"
                           },
                           "up":4,
                           "down":1
                        }
                     }
                  }
               ]
            },
            "values":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/values"
               },
               "list":[
                  {
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/value/7815696ecbf1c96e6894b779456d330e/test"
                     },
                     "key":{
                        "namespace":"7815696ecbf1c96e6894b779456d330e",
                        "field":"test"
                     },
                     "value":"VGhpcyBpcyBhbiBleGFtcGxl"
                  }
               ]
            },
            "documentLinks":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/links"
               },
               "in":[
                  {
                     "documentLink":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66"
                        },
                        "title":"blabla",
                        "description":"asdasd",
                        "creationTime":"2010-07-17T18:54:11.939Z",
                        "creator":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/123456"
                           }
                        },
                        "source":{
                           "document":{
                              "link":{
                                 "rel":"self",
                                 "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66"
                              }
                           }
                        },
                        "destination":{
                           "document":{
                              "link":{
                                 "rel":"self",
                                 "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128"
                              }
                           }
                        },
                        "votes":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/votes"
                           },
                           "up":12,
                           "down":2
                        },
                        "tags":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tags"
                           },
                           "list":[
                              {
                                 "tag":{
                                    "link":{
                                       "rel":"self",
                                       "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                                    },
                                    "baseTag":{
                                       "link":{
                                          "rel":"self",
                                          "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                                       }
                                    },
                                    "value":"mytag",
                                    "creationTime":"2010-07-17T18:54:11.939Z",
                                    "creator":{
                                       "link":{
                                          "rel":"self",
                                          "href":"http://core.example.foo/v2/user/123456"
                                       }
                                    },
                                    "votes":{
                                       "link":{
                                          "rel":"self",
                                          "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                                       },
                                       "up":12,
                                       "down":2
                                    }
                                 }
                              }
                           ]
                        }
                     }
                  }
               ],
               "out":[

               ]
            }
         }
      }
   }
}</pre>
						
					
<a name="N70263"></a>
<h3 class="operation">4.3 Fetch snapshots of multiple documents (batch request)</h3>
<h4>Description</h4>Given a list of document URIs, it returns a list containing details for each document (meta data type).
				<h4>URI</h4>
<pre>http://core.example.foo/v2/documents/snapshot</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "documents":[
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66",
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-00000invalid"
   ]
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Results in response body. Note that tasks may still have raised errors (i.e. when not found).</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid query or too many items requested.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "results":{
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-00000invalid":{
         "error":{
            "reason":"Not found"
         }
      },
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66":{
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66"
            },
            "mediaType":"image",
            "publishedTime":"2010-07-17T18:54:11.939Z",
            "publisher":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "title":"A cool image of fubar",
            "description":"&hellip;",
            "snapshot":{
               "attachment":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66"
                  },
                  "title":"A cool image of fubar",
                  "description":"yada yada",
                  "publishedTime":"2010-07-17T18:54:11.939Z",
                  "publisher":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "mimeType":"image/jpeg",
                  "file":{
                     "size":132456,
                     "link":{
                        "rel":"self",
                        "href":"http://storage.example.foo/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66.jpg"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66/votes"
                     },
                     "up":12,
                     "down":2
                  },
                  "license":"Creative Commons Attribution-ShareAlike 3.0 Unported - Deed",
                  "contributors":[

                  ],
                  "creators":[
	                  {
	                     "user":{
	                        "link":{
	                           "rel":"self",
	                           "href":"http://core.example.foo/v2/user/789012"
	                        }
	                     }
	                  }
                  ]
               },
               "location":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/location/48.39848,9.991246,100"
                  },
                  "position":{
                     "type":"Point",
                     "coordinates":[
                        9.991246,
                        48.39848
                     ]
                  },
                  "variance":100,
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/location/48.39848,9.991246,100/votes"
                     },
                     "up":4,
                     "down":1
                  }
               },
               "time":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/time/2010-06-29T19:00:00.000Z--2010-06-29T20:00:00.000Z"
                  },
                  "between":{
                     "after":"2010-06-29T19:00:00.000Z",
                     "before":"2010-06-29T20:00:00.000Z"
                  },
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/time/2010-06-29T19:15:50.000Z--2010-06-29T19:15:50.000Z/votes"
                     },
                     "up":4,
                     "down":1
                  }
               }
            },
            "comments":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments"
               }
            },
            "tags":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tags"
               },
               "list":[
                  {
                     "tag":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                        },
                        "baseTag":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                           }
                        },
                        "value":"mytag",
                        "creationTime":"2010-07-17T18:54:11.939Z",
                        "creator":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/123456"
                           }
                        },
                        "votes":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                           },
                           "up":12,
                           "down":2
                        }
                     }
                  }
               ]
            },
            "attachments":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachments"
               }
            },
            "locations":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/locations"
               }
            },
            "times":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/times"
               }
            },
            "values":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/values"
               }
            },
            "documentLinks":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/links"
               }
            }
         }
      }
   }
}</pre>
						
					
<a name="N70203"></a>
<h3 class="operation">4.4 Fetch the meta-data of multiple documents (batch request)</h3>
<h4>Description</h4>Given a list of document URIs, it returns a list containing details for each document (meta data type).<h4>URI</h4>
<pre>http://core.example.foo/v2/documents/multiple</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "documents":[
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66",
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-00000invalid"
   ]
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Results in response body. Note that tasks may still have raised errors (i.e. when not found).</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid query or too many items requested.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "results":{
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-00000invalid":{
         "error":{
            "reason":"Not found"
         }
      },
      "http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66":{
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66"
            },
            "mediaType":"image",
            "publishedTime":"2010-07-17T18:54:11.939Z",
            "publisher":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "title":"A cool image of fubar",
            "description":"&hellip;",
            "comments":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments"
               }
            },
            "tags":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tags"
               }
            },
            "attachments":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachments"
               }
            },
            "locations":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/locations"
               }
            },
            "times":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/times"
               }
            },
            "values":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/values"
               }
            },
            "documentLinks":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/links"
               }
            }
         }
      }
   }
}</pre>
						
					
<a name="N70147"></a>
<h3 class="operation">4.5 Get a single document (full)</h3>
<h4>Description</h4>Returns the complete data related the given document. All related data will be inlined, and items 
				normally paginated (such as comments) will be included as full flattened lists.				
				Please note that this is an expensive operation in terms of data to be collected for the response and also data
				to be sent over the network. Thus, please use this API call responsibly and only if you need the full data set.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/full</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Document data in response</dd>
<dt class="statuscode">204 No Content</dt>
<dd>Document exists, but is not available (i.e. creation pending)</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "document":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66"
      },
      "mediaType":"image",
      "publishedTime":"2010-07-17T18:54:11.939Z",
      "publisher":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "title":"A cool image of fubar",
      "description":"&hellip;",
      "comments":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments"
         },
         "list":[
            {
               "comment":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66"
                  },
                  "content":"blablabla",
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comment/8e252710-77cf-11e0-a1f0-0800200c9a66/votes"
                     },
                     "up":12,
                     "down":2
                  }
               }
            }
         ]
      },
      "tags":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tags"
         },
         "list":[
            {
               "tag":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                  },
                  "baseTag":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                     }
                  },
                  "value":"mytag",
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                     },
                     "up":12,
                     "down":2
                  }
               }
            }
         ]
      },
      "attachments":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachments"
         },
         "list":[
            {
               "attachment":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66"
                  },
                  "title":"A cool image of fubar",
                  "description":"yada yada",
                  "publishedTime":"2010-07-17T18:54:11.939Z",
                  "publisher":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "mimeType":"image/jpeg",
                  "file":{
                     "size":132456,
                     "link":{
                        "rel":"self",
                        "href":"http://storage.example.foo/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66.jpg"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66/votes"
                     },
                     "up":12,
                     "down":2
                  },
                  "license":"Creative Commons Attribution-ShareAlike 3.0 Unported - Deed",
                  "contributors":[

                  ],
                  "creators":[
                     {
                        "user":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/789012"
                           }
                        }
                     }
                  ]
               }
            },
            {
               "attachment":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/c4139f47-a90e-4b37-aec1-1f1b3aae9e3c"
                  },
                  "title":"A cool image of fubar",
                  "description":"yada yada",
                  "publishedTime":"2010-07-17T18:54:11.939Z",
                  "publisher":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "mimeType":"image/x-diretto-twitpix+url",
                  "external":{
                     "link":{
                        "rel":"self",
                        "href":"http://twitpix.foo/135xa"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/c4139f47-a90e-4b37-aec1-1f1b3aae9e3c/votes"
                     },
                     "up":12,
                     "down":2
                  },
                  "license":"http://creativecommons.org/licenses/by-sa/3.0/de/",
                  "contributors":[
                     {
                        "external":{
                           "name":"Alice",
                           "link":null
                        }
                     },
                     {
                        "user":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/789012"
                           }
                        }
                     }
                  ],
                  "creators":[
                     {
                        "user":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/user/007007"
                           }
                        }
                     }
                  ]
               }
            }
         ]
      },
      "locations":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/locations"
         },
         "list":[
            {
               "location":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/location/48.39848,9.991246,100"
                  },
                  "position":{
                     "type":"Point",
                     "coordinates":[
                        9.991246,
                        48.39848
                     ]
                  },
                  "variance":100,
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/location/48.39848,9.991246,100/votes"
                     },
                     "up":4,
                     "down":1
                  }
               }
            }
         ]
      },
      "times":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/times"
         },
         "list":[
            {
               "time":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/time/2010-06-29T19:00:00.000Z--2010-06-29T20:00:00.000Z"
                  },
                  "between":{
                     "after":"2010-06-29T19:00:00.000Z",
                     "before":"2010-06-29T20:00:00.000Z"
                  },
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/time/2010-06-29T19:15:50.000Z--2010-06-29T19:15:50.000Z/votes"
                     },
                     "up":4,
                     "down":1
                  }
               }
            }
         ]
      },
      "values":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/values"
         },
         "list":[
            {
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/value/7815696ecbf1c96e6894b779456d330e/test"
               },
               "key":{
                  "namespace":"7815696ecbf1c96e6894b779456d330e",
                  "field":"test"
               },
               "value":"VGhpcyBpcyBhbiBleGFtcGxl"
            }
         ]
      },
      "documentLinks":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/links"
         },
         "in":[
            {
               "documentLink":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66"
                  },
                  "title":"blabla",
                  "description":"asdasd",
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "source":{
                     "document":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66"
                        }
                     }
                  },
                  "destination":{
                     "document":{
                        "link":{
                           "rel":"self",
                           "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128"
                        }
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/votes"
                     },
                     "up":12,
                     "down":2
                  },
                  "tags":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tags"
                     },
                     "list":[
                        {
                           "tag":{
                              "link":{
                                 "rel":"self",
                                 "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                              },
                              "baseTag":{
                                 "link":{
                                    "rel":"self",
                                    "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                                 }
                              },
                              "value":"mytag",
                              "creationTime":"2010-07-17T18:54:11.939Z",
                              "creator":{
                                 "link":{
                                    "rel":"self",
                                    "href":"http://core.example.foo/v2/user/123456"
                                 }
                              },
                              "votes":{
                                 "link":{
                                    "rel":"self",
                                    "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                                 },
                                 "up":12,
                                 "down":2
                              }
                           }
                        }
                     ]
                  }
               }
            }
         ],
         "out":[

         ]
      }
   }
}</pre>
						
					
<a name="N70036"></a>
<h3 class="operation">4.6 Get a single document (meta-data only)</h3>
<h4>Description</h4>Returns meta-data of the document. The response includes only values directly referring to the document itself.
				There are hyperlinks for other related data.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Document data in response</dd>
<dt class="statuscode">204 No Content</dt>
<dd>Document exists, but is not available (i.e. creation pending)</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "document":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66"
      },
      "mediaType":"image",
      "publishedTime":"2010-07-17T18:54:11.939Z",
      "publisher":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "title":"A cool image of fubar",
      "description":"&hellip;",
      "comments":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments"
         }
      },
      "tags":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tags"
         }
      },
      "attachments":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachments"
         }
      },
      "locations":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/locations"
         }
      },
      "times":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/times"
         }
      },
      "values":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/values"
         }
      },
      "documentLinks":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/links"
         }
      }
   }
}</pre>
						
					
<a name="N70091"></a>
<h3 class="operation">4.7 Get a single document (snapshot)</h3>
<h4>Description</h4>Returns a condensed snapshot of a document. It contains the full meta data of the document, and additionally inlined
				the complete list of tags, the initial attachment data and one entry for time and one for location origin (best votes).<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/snapshot</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Document data in response</dd>
<dt class="statuscode">204 No Content</dt>
<dd>Document exists, but is not available (i.e. creation pending)</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "document":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66"
      },
      "mediaType":"image",
      "publishedTime":"2010-07-17T18:54:11.939Z",
      "publisher":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "title":"A cool image of fubar",
      "description":"&hellip;",
      "snapshot":{
         "attachment":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66"
            },
            "title":"A cool image of fubar",
            "description":"yada yada",
            "publishedTime":"2010-07-17T18:54:11.939Z",
            "publisher":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "mimeType":"image/jpeg",
            "file":{
               "size":132456,
               "link":{
                  "rel":"self",
                  "href":"http://storage.example.foo/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66.jpg"
               }
            },
            "votes":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachment/eafbad70-7972-11e0-a1f0-0800200c9a66/votes"
               },
               "up":12,
               "down":2
            },
            "license":"Creative Commons Attribution-ShareAlike 3.0 Unported - Deed",
            "contributors":[

            ],
            "creators":[
	            {
	               "user":{
	                  "link":{
	                     "rel":"self",
	                     "href":"http://core.example.foo/v2/user/789012"
	                  }
	               }
	            }
            ]
         },
         "location":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/location/48.39848,9.991246,100"
            },
            "position":{
               "type":"Point",
               "coordinates":[
                  9.991246,
                  48.39848
               ]
            },
            "variance":100,
            "creationTime":"2010-07-17T18:54:11.939Z",
            "creator":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "votes":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/location/48.39848,9.991246,100/votes"
               },
               "up":4,
               "down":1
            }
         },
         "time":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/time/2010-06-29T19:00:00.000Z--2010-06-29T20:00:00.000Z"
            },
            "between":{
               "after":"2010-06-29T19:00:00.000Z",
               "before":"2010-06-29T20:00:00.000Z"
            },
            "creationTime":"2010-07-17T18:54:11.939Z",
            "creator":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "votes":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/time/2010-06-29T19:15:50.000Z--2010-06-29T19:15:50.000Z/votes"
               },
               "up":4,
               "down":1
            }
         }
      },
      "comments":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/comments"
         }
      },
      "tags":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tags"
         },
         "list":[
            {
               "tag":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                  },
                  "baseTag":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                     }
                  },
                  "value":"mytag",
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                     },
                     "up":12,
                     "down":2
                  }
               }
            }
         ]
      },
      "attachments":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/attachments"
         }
      },
      "locations":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/locations"
         }
      },
      "times":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/eafbad70-7972-11e0-a1f0-0800200c9a66/times"
         }
      },
      "values":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/values"
         }
      },
      "documentLinks":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/links"
         }
      }
   }
}</pre>
						
					
<a name="N69890"></a>
<h3 class="operation">4.8 List of all documents (forward)</h3>
<h4>Description</h4>Forwards to a list of all documents, ordered by publishing date.<h4>URI</h4>
<pre>http://core.example.foo/v2/documents</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No results available yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Redirect to first page</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N69934"></a>
<h3 class="operation">4.9 List of all documents (page)</h3>
<h4>Description</h4>Returns a page from the list of all documents, ordered by publishing date.<h4>URI</h4>
<pre>http://core.example.foo/v2/documents/cursor/<span class="uripart">{cursor-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{cursor-id}</dt>
<dd>the document ID used as cursor</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List page in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Cursor not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/documents/cursor/550e8400-e29b-11d4-a716-446655440000"
      }
   },
   "list":[
      {
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/550e8400-e29b-11d4-a716-446655440000"
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/documents/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/documents/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
						
					
<a name="N70472"></a>
<h3 class="operation">4.10 List of documents published by a user (forward)</h3>
<h4>Description</h4>Forwards to a list of documents that this user has published, ordered by publishing date.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/documents</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No results available yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to the first page.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>User not found</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N70524"></a>
<h3 class="operation">4.11 List of documents published by a user (page)</h3>
<h4>Description</h4>Returns a page from the list of documents that this user has published, ordered by publishing date.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/documents/cursor/<span class="uripart">{doc-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user ID</dd>
<dt class="uripart">{doc-id}</dt>
<dd>doc ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List page in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>User/Cursor not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/user/asdasd/documents/cursor/550e8400-e29b-11d4-a716-446655440000"
      }
   },
   "list":[
      {
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/550e8400-e29b-11d4-a716-446655440000"
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/user/asdasd/documents/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/user/asdasd/documents/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
						
					
<a name="N69989"></a>
<h3 class="operation">4.12 List of documents published since a specific date (forward)</h3>
<h4>Description</h4>Forwards to a list of all documents published since a specific date, ordered by publishing date.<h4>URI</h4>
<pre>http://core.example.foo/v2/documents/since/<span class="uripart">{split date}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{split date}</dt>
<dd>A RFC 3339 compliant date (Zulu time) to be used as split point.</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No results available yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Redirect to new page</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N65568"></a>
<h2 class="resource">5. Index</h2>
<h4>Description</h4>
<p>This entry resource provides information about the instance.</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2</pre>
<dl></dl>
<a name="N65578"></a>
<h3 class="operation">5.1 Get service instance data</h3>
<h4>Description</h4>Returns a static information about the deployed Core service instance.<h4>URI</h4>
<pre>http://core.example.foo/v2</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>not required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Service instance data in response entity</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "api":{
      "name":"org.diretto.api.main.core",
      "version":"v2"
   },
   "service":{
      "name":"diretto Core API Node",
      "version":"0.2.0"
   },
   "deployment":{
      "title":"fubar diretto Deployment",
      "contact":"mail@deployer",
      "website":{
         "link":{
            "rel":"self",
            "href":"http://www.diretto.org"
         }
      }
   },
   "links":[
      {
         "title":"diretto Core API Documentation",
         "link":{
            "rel":"self",
            "href":"http://diretto.github.com/diretto-api-doc/v2/diretto/core.html"
         }
      }
   ],
   "parameters":{
      "paginationSize":20,
      "batchLimit":50
   }   
}</pre>
						The JSON response contains information about the service identification and version and the actual deployment variables.
						
					<a name="N68939"></a>
<h2 class="resource">6. Key-Value Pair</h2>
<h4>Description</h4>
<p>This resource represents a key-value pair. Key-value pairs can be seen as structured tags for machines, as opposed to regular tags for human users.
			Key value pairs can be added to a document, and are accessable (readable) for all platform users. The key part consists of a namespace and a key name.
			The user id will be used as namespace and will be added automatically. The key name can be any string, with the minimal length of 3 characters and a maximum of 64 characters.
			Only alphanumerical chars plus the following symbols are allowed inside the key name: "<span style="font-family:monospace;">-</span>" "<span style="font-family:monospace;">:</span>" "<span style="font-family:monospace;">_</span>" and "<span style="font-family:monospace;">.</span>"
			
			The actual value must be string of limited length (actual length depends on the service implementation). Any non-textual content must be encoded using Base64 or similar encodings.
			Due to the user-based namespacing, multiple users can put values into this storage using the same string as key, ending up in different entries, separated by the user id.
			Please note that all key value pairs are public for all users, so they don't represent a mechanism for saving classified data.  
			
			</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/value/<span class="uripart">{user-id}</span>/<span class="uripart">{key}</span>
</pre>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">user-id</dt>
<dd>user ID for namespacing</dd>
<dt class="uripart">key</dt>
<dd>key name (valid chars: alphanumercial or one of '-' ':' '.' '_')</dd>
</dl>
<a name="N69025"></a>
<h3 class="operation">6.1 Get a key/value pair</h3>
<h4>Description</h4>Returns a specific key/value pair. Note that any user of the platform can execute this call.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/value/<span class="uripart">{user-id}</span>/<span class="uripart">{key}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">user-id</dt>
<dd>user ID for namespacing</dd>
<dt class="uripart">key</dt>
<dd>key name (valid chars: alphanumercial or one of '-' ':' '.' '_')</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Key/value pair in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Key not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "link":{
      "rel":"self",
      "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/value/7815696ecbf1c96e6894b779456d330e/test"
   },
   "key":{
      "namespace":"7815696ecbf1c96e6894b779456d330e",
      "field":"test"
   },
   "value":"VGhpcyBpcyBhbiBleGFtcGxl"
}</pre>
						
					
<a name="N69125"></a>
<h3 class="operation">6.2 Remove a key/value pair</h3>
<h4>Description</h4>Removes the given key/value pair. This is an irreversible call.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/value/<span class="uripart">{user-id}</span>/<span class="uripart">{key}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">user-id</dt>
<dd>user ID for namespacing</dd>
<dt class="uripart">key</dt>
<dd>key name (valid chars: alphanumercial or one of '-' ':' '.' '_')</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">DELETE</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>Key/value pair has been deleted.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid key or value</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Wrong user, key namespace not allowed.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68973"></a>
<h3 class="operation">6.3 Retrieve all key/value pairs for a document</h3>
<h4>Description</h4>Returns a list of all key/value pairs available for the given document.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/values</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Key/value pairs in response</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "values":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/values"
      },
      "list":[
         {
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/value/7815696ecbf1c96e6894b779456d330e/test"
            },
            "key":{
               "namespace":"7815696ecbf1c96e6894b779456d330e",
               "field":"test"
            },
            "value":"VGhpcyBpcyBhbiBleGFtcGxl"
         }
      ]
   }
}</pre>
						
					
<a name="N69073"></a>
<h3 class="operation">6.4 Set a key/value pair</h3>
<h4>Description</h4>Puts the given value into the storage using the given key name. The request will be executed
				if the user part of the key matches the user dispatching the request.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/value/<span class="uripart">{user-id}</span>/<span class="uripart">{key}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">user-id</dt>
<dd>user ID for namespacing</dd>
<dt class="uripart">key</dt>
<dd>key name (valid chars: alphanumercial or one of '-' ':' '.' '_')</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">PUT</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "key":{
      "field":"test"
   },
   "value":"VGhpcyBpcyBhbiBleGFtcGxl"
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">202 Accepted</dt>
<dd>Key/value pair has been set.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid key or value</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Wrong user, key namespace not allowed.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67676"></a>
<h2 class="resource">7. Link</h2>
<h4>Description</h4>
<p>This resource represents a link. A link
			is unidirectional connection between two documents. The semantics of a link is
			an unidirectional trace from the source document to the destination document,
			such as  happens-after or is-the-result-of.
			</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/link/<span class="uripart">{link-id}</span>
</pre>
<dl>
<dt class="uripart">link-id</dt>
<dd>link ID</dd>
</dl>
<a name="N67690"></a>
<h3 class="operation">7.1 Create a new link</h3>
<h4>Description</h4>Adds a new link to the platform.<h4>URI</h4>
<pre>http://core.example.foo/v2/links</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						
							
<pre class="brush: js">
{
   "title":"blabla",
   "description":"asdasd",
   "source":{
      "document":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66"
         }
      }
   },
   "destination":{
      "document":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128"
         }
      }
   }
}</pre>
													
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>Link created.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid data.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67898"></a>
<h3 class="operation">7.2 List of links (forward)</h3>
<h4>Description</h4>Forwards to the list of links.<h4>URI</h4>
<pre>http://core.example.foo/v2/links</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No links available yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to list.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67942"></a>
<h3 class="operation">7.3 List of links (page)</h3>
<h4>Description</h4>List of links, sorted by creation date.<h4>URI</h4>
<pre>http://core.example.foo/v2/links/cursor/<span class="uripart">{link-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{link-id}</dt>
<dd>link id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List in response.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Cursor not found.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/links/cursor/1ec99ce0-a28e-11e0-8264-0800200c9a66"
      }
   },
   "list":[
      {
         "documentLink":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66"
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/links/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/links/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
							The number of elements shown has been limited to a single item per page only to keep this example simple.
											
					<a name="N67851"></a>
<h3 class="operation">7.4 List of links created since a specific date (forward)</h3>
<h4>Description</h4>Forwards to the list of links that have been created since a given date.<h4>URI</h4>
<pre>http://core.example.foo/v2/links/since/<span class="uripart">{split date}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{split date}</dt>
<dd>A RFC 3339 compliant date (Zulu time) to be used as split point.</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No new links available since that date.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to list.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67742"></a>
<h3 class="operation">7.5 Retrieve a link</h3>
<h4>Description</h4>Returns a link.<h4>URI</h4>
<pre>http://core.example.foo/v2/link/<span class="uripart">{link-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">link-id</dt>
<dd>link ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Link data in response.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Link not found.</dd>
</dl>
<h4>Response Entities</h4>
						
							
<pre class="brush: js">
{
   "documentLink":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66"
      },
      "title":"blabla",
      "description":"asdasd",
      "creationTime":"2010-07-17T18:54:11.939Z",
      "creator":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "source":{
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66"
            }
         }
      },
      "destination":{
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128"
            }
         }
      },
      "votes":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/votes"
         },
         "up":12,
         "down":2
      },
      "tags":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tags"
         },
         "list":[
            {
               "tag":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                  },
                  "baseTag":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                     }
                  },
                  "value":"mytag",
                  "creationTime":"2010-07-17T18:54:11.939Z",
                  "creator":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/user/123456"
                     }
                  },
                  "votes":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                     },
                     "up":12,
                     "down":2
                  }
               }
            }
         ]
      }
   }
}</pre>
													
					
<a name="N67792"></a>
<h3 class="operation">7.6 Retrieve all links containing a specific document</h3>
<h4>Description</h4>Returns a list of links that contain a given document as source or destination.<h4>URI</h4>
<pre>http://core.example.foo/v2/documents/<span class="uripart">{doc-id}</span>/links</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Link list in response.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "documentLinks":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128/links"
      },
      "in":[
         {
            "documentLink":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66"
               },
               "title":"blabla",
               "description":"asdasd",
               "creationTime":"2010-07-17T18:54:11.939Z",
               "creator":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/user/123456"
                  }
               },
               "source":{
                  "document":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66"
                     }
                  }
               },
               "destination":{
                  "document":{
                     "link":{
                        "rel":"self",
                        "href":"http://core.example.foo/v2/document/c0e33672-79ac-4d16-b097-5c3f68a66128"
                     }
                  }
               },
               "votes":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/votes"
                  },
                  "up":12,
                  "down":2
               },
               "tags":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tags"
                  },
                  "list":[
                     {
                        "tag":{
                           "link":{
                              "rel":"self",
                              "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                           },
                           "baseTag":{
                              "link":{
                                 "rel":"self",
                                 "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                              }
                           },
                           "value":"mytag",
                           "creationTime":"2010-07-17T18:54:11.939Z",
                           "creator":{
                              "link":{
                                 "rel":"self",
                                 "href":"http://core.example.foo/v2/user/123456"
                              }
                           },
                           "votes":{
                              "link":{
                                 "rel":"self",
                                 "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                              },
                              "up":12,
                              "down":2
                           }
                        }
                     }
                  ]
               }
            }
         }
      ],
      "out":[

      ]
   }
}</pre>
							The number of elements shown has been limited to a single item per page only to keep this example simple.
											
					<a name="N69350"></a>
<h2 class="resource">8. Location</h2>
<h4>Description</h4>
<p>This resource represents the location, where a document has been created. The location is stored
			using WGS84 coordinates. In addition to the position, also a variance value can be provided, denoting the approximate
			variance in meters from the given position. This enables support for inaccurate location values. The position value
			is stored using the GeoJSON specification.
			</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/location/<span class="uripart">{lat}</span>,<span class="uripart">{lon}</span>,<span class="uripart">{variance}</span>
</pre>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">lat</dt>
<dd>latitude as float value (degrees)</dd>
<dt class="uripart">lon</dt>
<dd>longitude as float value (degrees)</dd>
<dt class="uripart">variance</dt>
<dd>position variance as integer value (meters)</dd>
</dl>
<a name="N69476"></a>
<h3 class="operation">8.1 Get a suggested location origin of a document</h3>
<h4>Description</h4>Returns a single location origin that has been suggested for the given document.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/location/<span class="uripart">{lat}</span>,<span class="uripart">{lon}</span>,<span class="uripart">{variance}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">lat</dt>
<dd>latitude as float value (degrees)</dd>
<dt class="uripart">lon</dt>
<dd>longitude as float value (degrees)</dd>
<dt class="uripart">variance</dt>
<dd>position variance as integer value (meters)</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd></dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document or location not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "location":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/location/48.39848,9.991246,100"
      },
      "position":{
         "type":"Point",
         "coordinates":[
            9.991246,
            48.39848
         ]
      },
      "variance":100,
      "creationTime":"2010-07-17T18:54:11.939Z",
      "creator":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "votes":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/location/48.39848,9.991246,100/votes"
         },
         "up":4,
         "down":1
      }
   }
}</pre>
						
						A location entry suggesting that the given document has been created around latitude 48.39848, longitude 9.991246 with a variance of 100 meters.
						Please note that the <span style="font-family:monospace;">position</span> value represents a valid GeoJSON object. GeoJSON is using a different order for positions (longitude, latitude)
						than the order used for building location resource URIs.
					<a name="N69376"></a>
<h3 class="operation">8.2 List all suggested location origins of a document</h3>
<h4>Description</h4>Returns a list of all location origins that have been suggested by the users for the given document.
				The included number of votes for each suggestion can be used to rank the suggestions.
				<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/locations</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Creation location list in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "locations":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/locations"
      },
      "list":[
         {
            "location":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/location/48.39848,9.991246,100"
               },
               "position":{
                  "type":"Point",
                  "coordinates":[
                     9.991246,
                     48.39848
                  ]
               },
               "variance":100,
               "creationTime":"2010-07-17T18:54:11.939Z",
               "creator":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/user/123456"
                  }
               },
               "votes":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/location/48.39848,9.991246,100/votes"
                  },
                  "up":4,
                  "down":1
               }
            }
         }
      ]
   }
}</pre>
						
					
<a name="N69432"></a>
<h3 class="operation">8.3 Suggest an alternative location origin for a document</h3>
<h4>Description</h4>Adds a new suggestion for the location origin for this document.
				<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/location/<span class="uripart">{lat}</span>,<span class="uripart">{lon}</span>,<span class="uripart">{variance}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">lat</dt>
<dd>latitude as float value (degrees)</dd>
<dt class="uripart">lon</dt>
<dd>longitude as float value (degrees)</dd>
<dt class="uripart">variance</dt>
<dd>position variance as integer value (meters)</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">PUT</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">202 Accepted</dt>
<dd>Suggestion accepted</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid location</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68541"></a>
<h2 class="resource">9. Message</h2>
<h4>Description</h4>
<p>This resource represents a private message that can be sent from one user to another. No other user  can access this message. When a new message has been posted, two independent copies will be stored: one in the outbox of the sender, and one in the inbox of the receiver. 
			Please note that there is no API functionality for marking messages as 'read'. If necessary this feature can be implemented by the service clients.
			The owner of the user resource and the user executing the request must be the same (except for API call posting a new message).</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/inbox/message/<span class="uripart">{msg-id}</span>
</pre>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">msg-id</dt>
<dd>message ID</dd>
</dl>
<a name="N68626"></a>
<h3 class="operation">9.1 List of inbox messages received since a specific date (forward)</h3>
<h4>Description</h4>Forwards to the list of incoming messages, that have been received since a given date. Useful for incremental requests of new messages.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/inbox/messages/since/<span class="uripart">{split date}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
<dt class="uripart">{split date}</dt>
<dd>A RFC 3339 compliant date (Zulu time) to be used as split point.</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No message received since that date.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to list.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68681"></a>
<h3 class="operation">9.2 List of messages (forward)</h3>
<h4>Description</h4>Forwards to the list of sent messages<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/<span class="uripart">{boxtype}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
<dt class="uripart">{boxtype}</dt>
<dd>'inbox' or 'outbox'</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No message received yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to list.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>User not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68740"></a>
<h3 class="operation">9.3 List of messages (page)</h3>
<h4>Description</h4>List of sent messages, ordered by date and paginated.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/<span class="uripart">{boxtype}</span>/messages/cursor/<span class="uripart">{msg-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
<dt class="uripart">{boxtype}</dt>
<dd>'inbox' or 'outbox'</dd>
<dt class="uripart">{msg-id}</dt>
<dd>message id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List in response.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Cursor not found.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/user/123456/outbox/messages/cursor/2671f383-a28c-44d5-b86b-f7f04bb0a015"
      }
   },
   "list":[
      {
         "message":{
            "creationTime":"2010-07-17T18:54:11.939Z",
            "links":[
               {
                  "link":{
                     "rel":"alternate",
                     "href":"http://core.example.foo/v2/user/123456/outbox/message/128ecf542a35ac5270a87dc740918404"
                  }
               },
               {
                  "link":{
                     "rel":"alternate",
                     "href":"http://core.example.foo/v2/user/789012/inbox/message/128ecf542a35ac5270a87dc740918404"
                  }
               }
            ],
            "sender":{
               "link":{
                  "rel":"author",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            },
            "receiver":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/789012"
               }
            },
            "title":"Yada yada",
            "content":"bla bla bla.."
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/user/123456/outbox/messages/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/user/123456/outbox/messages/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
							An example page of messages. The number of elements shown has been limited to a single comment per page to keep this example simple.
						
					<a name="N68559"></a>
<h3 class="operation">9.4 Post a new message</h3>
<h4>Description</h4>Inserts the given message into the receiver's inbox.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/inbox/messages</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id (receiver)</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
	"title":"Yada yada",
	"content":"bla bla bla.."
}</pre>
							Only title and message content must be posted. Note that that both title and content length may be constrained and invalid messages may be rejected.
											
					<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>Message created.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid message data.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>User not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68877"></a>
<h3 class="operation">9.5 Remove a message</h3>
<h4>Description</h4>Removes single message. Please note that this API call will not delete the message copy in the box of the counterpart.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/<span class="uripart">{boxtype}</span>/message/<span class="uripart">{msg-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
<dt class="uripart">{boxtype}</dt>
<dd>'inbox' or 'outbox'</dd>
<dt class="uripart">{msg-id}</dt>
<dd>message id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">DELETE</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>Message deleted.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Message not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N68810"></a>
<h3 class="operation">9.6 Retrieve a message</h3>
<h4>Description</h4>Returns a single message.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>/<span class="uripart">{boxtype}</span>/message/<span class="uripart">{msg-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{user-id}</dt>
<dd>user id</dd>
<dt class="uripart">{boxtype}</dt>
<dd>'inbox' or 'outbox'</dd>
<dt class="uripart">{msg-id}</dt>
<dd>message id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List in response.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Not allowed for this user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Message not found.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "message":{
      "creationTime":"2010-07-17T18:54:11.939Z",
      "links":[
         {
            "link":{
               "rel":"alternate",
               "href":"http://core.example.foo/v2/user/123456/outbox/message/128ecf542a35ac5270a87dc740918404"
            }
         },
         {
            "link":{
               "rel":"alternate",
               "href":"http://core.example.foo/v2/user/789012/inbox/message/128ecf542a35ac5270a87dc740918404"
            }
         }
      ],
      "sender":{
         "link":{
            "rel":"author",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "receiver":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/789012"
         }
      },
      "title":"Yada yada",
      "content":"bla bla bla.."
   }
}</pre>
						
					
<a name="N66737"></a>
<h2 class="resource">10. Query</h2>
<h4>Description</h4>
<p>An interface resource for query execution. A query must be dispatched to the server 
			which will return a URI for the query. This URI then contains the results. Results are paginated using cursors.
			A query resource stores the initial query parameters, not the result set. Thus, queries can be re-executed by using the same URI,
			although the corresponding results may have changed. Be aware of this fact when applying caching to query results.
<pre class="brush: plain">
   Client                      Core Service

     |                               |
     |                               |
     |      (1) POST Query           |
     |------------------------------&gt;|
     |                               |
     |      (2) 202 + Location       |
     |&lt;------------------------------|
     |                               |
     |                               |
     |      (3) GET Query Resource   |
     |------------------------------&gt;|
     |                               |
     |      (4) 303 + 1st page URI   |
     |&lt;------------------------------|
     |                               |
     |                               |
     |      (5) GET 1st result page  |
     |------------------------------&gt;|
     |                               |
     |      (6) 200 + First page     |
     |&lt;------------------------------|
     |                               |
</pre>		
Note that step 5 and 6 must be repeated for additional result pages. Also, step 1 and 2 can be skipped if an existing query (client already knows query URI) should be re-executed.			
			</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/query/stored/<span class="uripart">{query-id}</span>
</pre>
<dl>
<dt class="uripart">query-id</dt>
<dd>query id</dd>
</dl>
<a name="N66755"></a>
<h3 class="operation">10.1 Dispatch a query</h3>
<h4>Description</h4>Sends a custom query using the passed parameters.<h4>URI</h4>
<pre>http://core.example.foo/v2/query</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>		
						

<pre class="brush: js">{
   "query":{
      "time":{
         "start":"2010-06-29T19:15:51.765Z",
         "end":"2010-06-29T19:15:50.000Z"
      },
      "location":{
         "bbox":[
            100.0,
            0.0,
            105.0,
            1.0
         ]
      },
      "tags":null,
      "publishedBetween":null
   }
}</pre>
						A minimal query is built using two mandatory parameters (<span style="font-family:monospace;">time</span> and <span style="font-family:monospace;">location</span>). The other
						two parameters, <span style="font-family:monospace;">tags</span> and <span style="font-family:monospace;">publishedBetween</span> are optional and must be set to <span style="font-family:monospace;">null</span>, if not used.
						The result pages contain all documents matching all of the constraints (using a boolean AND). If there are more 
						than one items for location and time origin, the item with the best votes will be used.
						
						
						
						
<pre class="brush: js">{
   "query":{
      "time":{
         "start":"2010-06-29T19:15:51.765Z",
         "end":"2010-06-29T19:15:50.000Z"
      },
      "location":{
         "bbox":[
            100.0,
            0.0,
            105.0,
            1.0
         ]
      },
      "tags":[
         "http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
      ],
      "publishedBetween":{
         "start":"2010-06-01T00:00:00.000Z",
         "end":"2010-07-01T00:00:00.000Z"
      }
   }
}</pre>
						A more complex query featuring tags and publishing time. Using a list of <span style="font-family:monospace;">tags</span>, the result set 
						can be narrowed down to documents being tagged with the given tags. 
						The <span style="font-family:monospace;">publisedBetween</span> constraint can be used to restrict the result set depending on the time
						documents have been uploaded to the system. This is very useful do run incremental queries, or to update 
						query result sets without refetching already known items.
						Both <span style="font-family:monospace;">start</span> and <span style="font-family:monospace;">end</span> are necessary for the publishing time filter, but deliberately strong values
						can be used to emulate wildcard behaviour.  
						
						
					<h4>Responses</h4>
<dl>
<dt class="statuscode">202 Accepted</dt>
<dd>Query accepted, result location in header.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid query parameters.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N66848"></a>
<h3 class="operation">10.2 Forward to query result page</h3>
<h4>Description</h4>A request to a query URI will always be forwarded to the first page of the result set using the first cursor.<h4>URI</h4>
<pre>http://core.example.foo/v2/query</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>Query returned no results.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Query found, result location in header.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Query not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N66900"></a>
<h3 class="operation">10.3 Get query result page</h3>
<h4>Description</h4>Returns a paginated result page, identified by the cursor. A result page always contains links to related pages.<h4>URI</h4>
<pre>http://core.example.foo/v2/query/stored/<span class="uripart">{query-id}</span>/cursor/<span class="uripart">{cursor-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">query-id</dt>
<dd>query id</dd>
<dt class="uripart">{cursor-id}</dt>
<dd>cursor id</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Result page in response.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Query or cursor not found.</dd>
</dl>
<h4>Response Entities</h4>	
						

<pre class="brush: js">{
   "query":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/query/stored/128ecf542a35ac5270a87dc740918404"
      }
   },
   "results":{
      "count":101,
      "page":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/query/stored/128ecf542a35ac5270a87dc740918404/cursor/def"
         },
         "list":[
            {
               "document":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/2671f383-a28c-44d5-b86b-f7f04bb0a015"
                  }
               }
            }
         ],
         "related":[
            {
               "link":{
                  "rel":"first",
                  "href":"http://core.example.foo/v2/query/stored/128ecf542a35ac5270a87dc740918404/cursor/abc"
               }
            },
            {
               "link":{
                  "rel":"previous",
                  "href":"http://core.example.foo/v2/query/stored/128ecf542a35ac5270a87dc740918404/cursor/abc"
               }
            },
            {
               "link":{
                  "rel":"next",
                  "href":"http://core.example.foo/v2/query/stored/128ecf542a35ac5270a87dc740918404/cursor/ghi"
               }
            }
         ]
      }
   }
}</pre>
						A query result page containing links to the previous, next and first page. The first page link is always present, the others only when the other pages acutally exist.
							
					<a name="N65630"></a>
<h2 class="resource">11. Service</h2>
<h4>Description</h4>
<p>A resource for service informations.</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/service</pre>
<dl></dl>
<a name="N65641"></a>
<h3 class="operation">11.1 Get supported media types</h3>
<h4>Description</h4>Returns a list of supported media types that the deployment accepts as incoming documents. 
				Internal media types are supported to be stored within the platform using the Storage API. External media types
				are meta-data only entries that contain the link to the original source. Both types of media types can be 
				enabled or disabled. For both a wide range of MIME types can be configured during deployment.  				
				<h4>URI</h4>
<pre>http://core.example.foo/v2/service/mediatypes</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>not required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List in response entity</dd>
</dl>
<h4>Response Entities</h4>
						
						
<pre class="brush: js">
{
   "mediatypes":{
      "stored":{
         "image/jpeg":{
            "type":"image",
            "extension":"jpg",
            "maxSize":5210880
         }
      },
      "external":{
         "video/x-diretto-youtube+url":{
            "type":"video",
            "name":"YouTube Video"
         }
      }
   }
}						
						</pre>
						A sample configuration that allows only JPEG images to be stored on the platform itself.
						Images will be accepted as long as the file size does not exceed 5210880 byte. 
						Additionally, hyperlinks to YouTube videos will be accepted as well. Note that the corresponding content plugin
						will validate incoming external links, thus no further validation details are listed in this overview.
						
					<a name="N65691"></a>
<h3 class="operation">11.2 Get the service registry</h3>
<h4>Description</h4>Returns a list of registered services of the platform. If there is a Registry API service available, this request will be redirected to the Registry API directory.<h4>URI</h4>
<pre>http://core.example.foo/v2/service/registry</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>not required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List in response entity</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Redirect to Registry API service</dd>
</dl>
<h4>Response Entities</h4>
						
						
<pre class="brush: js">
{
   "services":{
      "list":[
         {
            "api":{
               "name":"org.diretto.api.external.task",
               "version":"v2"
            },
            "service":{
               "name":"diretto Task Node",
               "version":"0.1.0"
            },
            "deployment":{
               "title":"fubar Task Service",
               "contact":"n/a",
               "website":{
                  "link":{
                     "rel":"self",
                     "href":"http://www.diretto.org"
                  }
               }
            },
            "link":{
               "rel":"self",
               "href":"http://taskservice/v2"
            }
         }
      ]
   }
}						
						</pre>
						
					
<a name="N65742"></a>
<h3 class="operation">11.3 Obtain a random UUID</h3>
<h4>Description</h4>Returns a random UUID generated by the server. This UUID can be used once by the client, if it has no means
				to generate UUIDs on his own. The UUID is "guaranteed" not to be sent in other requests, as long as the world does not collapse (aka. random UUID collision). <h4>URI</h4>
<pre>http://core.example.foo/v2/service/uuid</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>not required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>UUID in response entity</dd>
</dl>
<h4>Response Entities</h4>
						
						
<pre class="brush: js">
{
   "uuid": "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
}						
						</pre>
						A single UUID is returned 
						
					<a name="N65795"></a>
<h2 class="resource">12. Tag</h2>
<h4>Description</h4>
<p>This resource represents a tag. Users can append tags on various resources. 
			The tag URI path is appended to the original URI. The following resources of the Core API can be tagged: <em>Document</em> and <em>Link</em>
			

<pre class="brush: plain">
   Client                      Task Service

     |                               |
     |                               |
     |   (1) POST Tag                |
     |------------------------------&gt;|
     |                               |
     |   (2) 201/202 + Location      |
     |&lt;------------------------------|
     |                               |
     |                               |
     |   (3) POST Tag to Resource    |
     |------------------------------&gt;|
     |                               |
     |   (4) 201/202 + Location      |
     |&lt;------------------------------|
     |                               |
     |                               |
</pre>				
		Steps 1+2 create a tag, steps 3+4 append the tag to a resource.</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/tag/<span class="uripart">{tag-id}</span>
</pre>
<dl>
<dt class="uripart">tag-id</dt>
<dd>tag ID</dd>
</dl>
<a name="N66052"></a>
<h3 class="operation">12.1 Append a tag to a resource</h3>
<h4>Description</h4>Appends a new tag to the resource.<h4>URI</h4>
<pre>http://core.example.foo/v2/<span class="uripart">{resource}</span>/tags</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{resource}</dt>
<dd>resource</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						
							
<pre class="brush: js">
{
   "baseTag":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
      }
   }
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>Tag has been appended. The location header contains its URI and thus also the tag id.</dd>
<dt class="statuscode">202 Accepted</dt>
<dd>Tag already exists, but accepted.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid tag data (i.e. ID mismatch).</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Tag or resource not found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N65819"></a>
<h3 class="operation">12.2 Create a new tag or resolve an existing tag</h3>
<h4>Description</h4>Create a new tag that can be appended to resource thereafter. This API call can also be used to retrieve the internal ID of an existing tag.<h4>URI</h4>
<pre>http://core.example.foo/v2/tags</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						
							
<pre class="brush: js">
{
   "value":"mytag"
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>Tag has been created. The location header contains its URI and thus also the tag id.</dd>
<dt class="statuscode">202 Accepted</dt>
<dd>Tag already exists, but accepted.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid tag data (i.e. length).</dd>
</dl>
<h4>Response Entities</h4>

							
<pre class="brush: js">
{
   "baseTag":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
      }
   }
}</pre>
											
					
<a name="N65883"></a>
<h3 class="operation">12.3 Create or resolve multiple tags (batch request)</h3>
<h4>Description</h4>Takes a list of textual tags and either creates or resolves each of them. For every single tag, either the base tag URI or an error message is returned.<h4>URI</h4>
<pre>http://core.example.foo/v2/tags/multiple</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						
							
<pre class="brush: js">
{
   "values":["t","mytag"]
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List of tags in response.</dd>
</dl>
<h4>Response Entities</h4>

							
<pre class="brush: js">
{
   "results":{
      "mytag":{
         "baseTag":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
            }
         }
      },
      "t":{
         "error":{
            "reason":"Invalid tag length"
         }
      }
   }
}</pre>
											
					
<a name="N66171"></a>
<h3 class="operation">12.4 List of all tags (forward)</h3>
<h4>Description</h4>Forwards to a paginated list of all tags in this service.<h4>URI</h4>
<pre>http://core.example.foo/v2/tags</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No results available yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to first page.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N66215"></a>
<h3 class="operation">12.5 List of all tags (page)</h3>
<h4>Description</h4>Returns a page of the paginated list of all tags.<h4>URI</h4>
<pre>http://core.example.foo/v2/tags/cursor/<span class="uripart">{tag-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{tag-id}</dt>
<dd>ID of tag used as cursor</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Page in response.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Cursor/page not found</dd>
</dl>
<h4>Response Entities</h4>
						
							
<pre class="brush: js">
{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/tags/cursor/ef7987f2bd22f4a8cf236c83a57c1f6b"
      }
   },
   "list":[
      {
         "baseTag":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
            },
            "value":"mytag",
            "creationTime":"2010-07-17T18:54:11.939Z",
            "creator":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/user/123456"
               }
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/tags/cursor/90b419abac69dc67572e335a8c85a1cc"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/tags/cursor/585b716c0efb1b8c040830315e1c94e4"
         }
      }
   ]
}</pre>
						
					
<a name="N66270"></a>
<h3 class="operation">12.6 List of documents using a specific tag (forward)</h3>
<h4>Description</h4>Forwards to a paginated list of all documents, where a given tag has been attached to.<h4>URI</h4>
<pre>http://core.example.foo/v2/tag/<span class="uripart">{tag-id}</span>/documents</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">tag-id</dt>
<dd>tag ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No documents available yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to first page.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N66314"></a>
<h3 class="operation">12.7 List of documents using a specific tag (page)</h3>
<h4>Description</h4>Returns a page of the paginated list of all tags.<h4>URI</h4>
<pre>http://core.example.foo/v2/tag/<span class="uripart">{tag-id}</span>/documents/cursor/<span class="uripart">{doc-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">tag-id</dt>
<dd>tag ID</dd>
<dt class="uripart">{doc-id}</dt>
<dd>ID of document used as cursor</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Page in response.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Cursor/page not found</dd>
</dl>
<h4>Response Entities</h4>
						
							
<pre class="brush: js">
{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/documents/cursor/550e8400-e29b-11d4-a716-446655440000"
      }
   },
   "list":[
      {
         "document":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/document/550e8400-e29b-11d4-a716-446655440000"
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/documents/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/documents/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
						
					
<a name="N66369"></a>
<h3 class="operation">12.8 List of links using a specific tag (forward)</h3>
<h4>Description</h4>Forwards to a paginated list of all links, where a given tag has been attached to.<h4>URI</h4>
<pre>http://core.example.foo/v2/tag/<span class="uripart">{tag-id}</span>/links</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">tag-id</dt>
<dd>tag ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No documents available yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to first page.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N66413"></a>
<h3 class="operation">12.9 List of links using a specific tag (page)</h3>
<h4>Description</h4>Returns a page of the paginated list of all tags.<h4>URI</h4>
<pre>http://core.example.foo/v2/tag/<span class="uripart">{tag-id}</span>/links/cursor/<span class="uripart">{link-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">tag-id</dt>
<dd>tag ID</dd>
<dt class="uripart">{link-id}</dt>
<dd>ID of link used as cursor</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Page in response.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Cursor/page not found</dd>
</dl>
<h4>Response Entities</h4>
						
							
<pre class="brush: js">
{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/links/cursor/1ec99ce0-a28e-11e0-8264-0800200c9a66"
      }
   },
   "list":[
      {
         "documentLink":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/link/1ec99ce0-a28e-11e0-8264-0800200c9a66"
            }
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/links/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/links/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}</pre>
						
					
<a name="N66116"></a>
<h3 class="operation">12.10 Retrieve all tags of a resource</h3>
<h4>Description</h4>Returns a single tag entry.<h4>URI</h4>
<pre>http://core.example.foo/v2/<span class="uripart">{resource}</span>/tags</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{resource}</dt>
<dd>resource</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd></dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Resource not found.</dd>
</dl>
<h4>Response Entities</h4>					
						
							
<pre class="brush: js">
{
   "tags":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/2671f383-a28c-44d5-b86b-f7f04bb0a015/tags"
      },
      "list":[
         {
            "tag":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/2671f383-a28c-44d5-b86b-f7f04bb0a015/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
               },
               "baseTag":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
                  }
               },
               "value":"mytag",
               "creationTime":"2010-07-17T18:54:11.939Z",
               "creator":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/user/123456"
                  }
               },
               "votes":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/2671f383-a28c-44d5-b86b-f7f04bb0a015/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
                  },
                  "up":12,
                  "down":2
               }
            }
         }
      ]
   }
}</pre>
						
					
<a name="N65991"></a>
<h3 class="operation">12.11 Retrieve a single tag of a resource</h3>
<h4>Description</h4>Returns a single tag entry that has been appended to a resource.<h4>URI</h4>
<pre>http://core.example.foo/v2/<span class="uripart">{resource}</span>/tag/<span class="uripart">{tag-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{resource}</dt>
<dd>resource identifier</dd>
<dt class="uripart">{tag-id}</dt>
<dd>tag ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd></dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Resource not found.</dd>
</dl>
<h4>Response Entities</h4>					
						
							
<pre class="brush: js">
{
   "tag":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/2671f383-a28c-44d5-b86b-f7f04bb0a015/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
      },
      "baseTag" : {
	      "link":{
	         "rel":"self",
	         "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
	      }
      }, 
      "value":"mytag",
      "creationTime":"2010-07-17T18:54:11.939Z",
      "creator":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "votes":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/2671f383-a28c-44d5-b86b-f7f04bb0a015/tag/ef7987f2bd22f4a8cf236c83a57c1f6b/votes"
         },
         "up":12,
         "down":2
      }
   }
}</pre>
							Note that the creation time denotes the time this tag has been appended to the resource for the first time.
						
					<a name="N65939"></a>
<h3 class="operation">12.12 Retrieve a tag</h3>
<h4>Description</h4>Returns a tag entry.<h4>URI</h4>
<pre>http://core.example.foo/v2/tag/<span class="uripart">{tag-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">tag-id</dt>
<dd>tag ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd></dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Tag not found.</dd>
</dl>
<h4>Response Entities</h4>					
						
							
<pre class="brush: js">
{
   "baseTag":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/tag/ef7987f2bd22f4a8cf236c83a57c1f6b"
      },
      "value":"mytag",
      "creationTime":"2010-07-17T18:54:11.939Z",
      "creator":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      }
   }
}</pre>
							Note that the creation time denotes the initial usage of this time.
						
					<a name="N69172"></a>
<h2 class="resource">13. Time</h2>
<h4>Description</h4>
<p>This resource represents the point in time, when a document has been created.
			Users can provide alternative values for the temporal origin of this document, but any
			new contribution should either represent an improvement of the value or a correction. 
			In order to allow inaccurate data as well, also ranges can be suggested. In the context of 
			the diretto platform, a time range has the following meaning: The time the range starts
			represents the first possible moment the creation of the document may have started. The time the range
			ends represents the latest possible moment the creation of the document may have started. 
			When the document itself has a duration (such as audio or video documents), the duration must 
			not be added to the range, so the time value always depicts the moment in which the creation
			of the document may have been started.
			If the exact time of creation is known, the same value should be used for start and end.
			</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/time/<span class="uripart">{range-start}</span>--<span class="uripart">{range-end}</span>
</pre>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">range-start</dt>
<dd>An RFC 3339 compliant date (Zulu time) depicting the first possible moment of document creation</dd>
<dt class="uripart">range-end</dt>
<dd>An RFC 3339 compliant date (Zulu time) depicting the latest possible moment of document creation</dd>
</dl>
<a name="N69294"></a>
<h3 class="operation">13.1 Get a suggested creation time of a document</h3>
<h4>Description</h4>Returns a single creation time suggested for the given document.<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/time/<span class="uripart">{range-start}</span>--<span class="uripart">{range-end}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">range-start</dt>
<dd>An RFC 3339 compliant date (Zulu time) depicting the first possible moment of document creation</dd>
<dt class="uripart">range-end</dt>
<dd>An RFC 3339 compliant date (Zulu time) depicting the latest possible moment of document creation</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd></dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document or creation time not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "time":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/time/2010-06-29T19:00:00.000Z--2010-06-29T20:00:00.000Z"
      },
      "between":{
         "after":"2010-06-29T19:00:00.000Z",
         "before":"2010-06-29T20:00:00.000Z"
      },
      "creationTime":"2010-07-17T18:54:11.939Z",
      "creator":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/user/123456"
         }
      },
      "votes":{
         "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/time/2010-06-29T19:15:50.000Z--2010-06-29T19:15:50.000Z/votes"
         },
         "up":4,
         "down":1
      }
   }
}</pre>
						
						A time entry suggesting that document the given document has been created (or the creation has been started) between 19:00 and 20:00 on 2010-06-29, Zulu time.
						Please note that the <span style="font-family:monospace;">creationTime</span> denotes the creation time of the suggestion and not of the document.
					<a name="N69194"></a>
<h3 class="operation">13.2 List all suggested creation times of a document</h3>
<h4>Description</h4>Returns a list of all creation times that have been suggested by the users for the given document.
				The included number of votes for each suggestion can be used to rank the suggestions.
				<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/times</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{doc-id}</dt>
<dd>document ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Creation time list in response</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "times":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/times"
      },
      "list":[
         {
            "time":{
               "link":{
                  "rel":"self",
                  "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/time/2010-06-29T19:00:00.000Z--2010-06-29T20:00:00.000Z"
               },
               "between":{
                  "after":"2010-06-29T19:00:00.000Z",
                  "before":"2010-06-29T20:00:00.000Z"
               },
               "creationTime":"2010-07-17T18:54:11.939Z",
               "creator":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/user/123456"
                  }
               },
               "votes":{
                  "link":{
                     "rel":"self",
                     "href":"http://core.example.foo/v2/document/32b8c320-a28e-11e0-8264-0800200c9a66/time/2010-06-29T19:15:50.000Z--2010-06-29T19:15:50.000Z/votes"
                  },
                  "up":4,
                  "down":1
               }
            }
         }
      ]
   }
}</pre>
						
					
<a name="N69250"></a>
<h3 class="operation">13.3 Suggest an alternative creation time for a document</h3>
<h4>Description</h4>Adds a new suggestion for the creation time of this document.
				<h4>URI</h4>
<pre>http://core.example.foo/v2/document/<span class="uripart">{doc-id}</span>/time/<span class="uripart">{range-start}</span>--<span class="uripart">{range-end}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">doc-id</dt>
<dd>document ID</dd>
<dt class="uripart">range-start</dt>
<dd>An RFC 3339 compliant date (Zulu time) depicting the first possible moment of document creation</dd>
<dt class="uripart">range-end</dt>
<dd>An RFC 3339 compliant date (Zulu time) depicting the latest possible moment of document creation</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">PUT</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">202 Accepted</dt>
<dd>Suggestion accepted</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid time range</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Document not found</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N66962"></a>
<h2 class="resource">14. User</h2>
<h4>Description</h4>
<p>This resource represents a user. A user account is neccessary for most of the interactions with the diretto platform.</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>
</pre>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
</dl>
<a name="N67142"></a>
<h3 class="operation">14.1 Change a user account</h3>
<h4>Description</h4>Changes an existing user account. This operation can only be executed for the user that is authenticating the request. Please note that the user id cannot be changed.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">PUT</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						
							
<pre class="brush: js">
{
	 "email" : "john@doe.net",
	 "password" : "da39a3ee5e6b4b0d3255bfef95601890afd80709",
	 "username" : "John Doe"
}</pre>
												
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">202 Accepted</dt>
<dd>User account has been changed.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>The provided data are incomplete or invalid.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>The user making this call is not allowed to change this user account.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67082"></a>
<h3 class="operation">14.2 Create a new user account</h3>
<h4>Description</h4>Creates a new user account, if service instance has enabled this feature.<h4>URI</h4>
<pre>http://core.example.foo/v2/users</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>not required<h4>Request Entities</h4>
						
							
<pre class="brush: js">
{
	 "email" : "john@doe.net",
	 "password" : "da39a3ee5e6b4b0d3255bfef95601890afd80709",
	 "username" : "John Doe"
}</pre>
												
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">201 Created</dt>
<dd>User account has been created. The location header contains its URI and thus also the user id.</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>The provided data are incomplete or invalid.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>The service instance does not allow the creation of new user accounts.</dd>
<dt class="statuscode">409 Conflict</dt>
<dd>The user account has not been created, because there already exists an account with matching parameters.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67260"></a>
<h3 class="operation">14.3 Fetch multiple users (batch request)</h3>
<h4>Description</h4>Given a list of user URIs, it returns a list containing details for each user.
				This request will always contain the public data of all users, even if the requesting user is among
				the result set.<h4>URI</h4>
<pre>http://core.example.foo/v2/users/multiple</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">POST</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
						

<pre class="brush: js">{
   "users":[
      "http://core.example.foo/v2/user/123456",
      "http://core.example.foo/v2/user/123invalid"
   ]
}</pre>
						
					
<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Results in response body. Note that tasks may still have raised errors (i.e. when not found).</dd>
<dt class="statuscode">400 Bad Request</dt>
<dd>Invalid query or too many items requested.</dd>
</dl>
<h4>Response Entities</h4>
						

<pre class="brush: js">{
   "results":{
      "http://core.example.foo/v2/user/123invalid":{
         "error":{
            "reason":"Not found"
         }
      },
      "http://core.example.foo/v2/user/123456":{
         "user":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/user/123456"
            },
            "username":"John Doe"
         }
      }
   }
}</pre>
						
					
<a name="N66976"></a>
<h3 class="operation">14.4 List of users (forward)</h3>
<h4>Description</h4>Forwards to the list of links.<h4>URI</h4>
<pre>http://core.example.foo/v2/users</pre>
<h4>URI Parameters</h4>n/a<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>No entries available yet.</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Forward to list.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67020"></a>
<h3 class="operation">14.5 List of users (page)</h3>
<h4>Description</h4>Provides a list of all registered users. Responses are paginated using cursors. 
				 The request can also be executed omitting the cursor ID. In the case, the URI of the first page is returned.<h4>URI</h4>
<pre>http://core.example.foo/v2/users/cursor/<span class="uripart">{cursor-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{cursor-id}</dt>
<dd>the user ID used as cursor</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>
	
							
<pre class="brush: js">
{
   "page":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/users/cursor/123456"
      }
   },
   "list":[
      {
         "user":{
            "link":{
               "rel":"self",
               "href":"http://core.example.foo/v2/user/123456"
            },
            "username":"John Doe"
         }
      }
   ],
   "related":[
      {
         "link":{
            "rel":"previous",
            "href":"http://core.example.foo/v2/users/cursor/5330edf0-a68d-11e0-8264-0800200c9a66"
         }
      },
      {
         "link":{
            "rel":"next",
            "href":"http://core.example.foo/v2/users/cursor/8d45b5ff-c6b8-4ec3-9fd1-96704233be3e"
         }
      }
   ]
}
							</pre>
							
							An example page of users. The number of elements shown has been limited to a single comment per page to keep this example simple.
						
					<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>List in response entity</dd>
<dt class="statuscode">303 See Other</dt>
<dd>Location of first when queried without cursor ID.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>List in response entity</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N67196"></a>
<h3 class="operation">14.6 Retrieve user data</h3>
<h4>Description</h4>Provides information about a user except the password.<h4>URI</h4>
<pre>http://core.example.foo/v2/user/<span class="uripart">{user-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>application/json</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>User data is available in response entity.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>No user found with the given user id.</dd>
</dl>
<h4>Response Entities</h4>
						
							
<pre class="brush: js">
{
   "user":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/user/123456"
      },
      "username":"John Doe"
   }
}</pre>
						A sample response for a regular user.					
						
						
							<pre class="brush: js">
{
   "user":{
      "link":{
         "rel":"self",
         "href":"http://core.example.foo/v2/user/123456"
      },
      "username":"John Doe",
      "email" : "john@doe.net"
   }
}</pre>
						When the user retrieves his own profile, the e-mail address is also included in the response.					
						
					<a name="N66471"></a>
<h2 class="resource">15. Vote</h2>
<h4>Description</h4>
<p>This resource represents a vote. Users can vote on various resources. The voting URI path is appended to the original URI. 
			The following resources of the Core API can be voted on: <em>Attachment</em>, <em>Link</em>, <em>Relation</em>, <em>Position</em>, <em>Time</em> , <em>Comment</em> and <em>Tag</em>.</p>
<h4>Resource URI</h4>
<pre>http://core.example.foo/v2/<span class="uripart">{resource}</span>/vote/user/<span class="uripart">{user-id}</span>
</pre>
<dl>
<dt class="uripart">resource</dt>
<dd>resource identifier</dd>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
</dl>
<a name="N66628"></a>
<h3 class="operation">15.1 Get all votes</h3>
<h4>Description</h4>Returns a summary of all votes for this resource.<h4>URI</h4>
<pre>http://core.example.foo/v2/<span class="uripart">{resource}</span>/votes</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">{resource}</dt>
<dd>resource identifier</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Votes in response body.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>Resource not found</dd>
</dl>
<h4>Response Entities</h4>	
						

<pre class="brush: js">{
   "votes":{
  	 "link":{
            "rel":"self",
            "href":"http://core.example.foo/v2/resource/votes"
         },
      "up":123,
      "down":42
   }
}</pre>
												
					
<a name="N66559"></a>
<h3 class="operation">15.2 Get a vote of the user</h3>
<h4>Description</h4>Returns the current vote of the user authenticating the request.<h4>URI</h4>
<pre>http://core.example.foo/v2/<span class="uripart">{resource}</span>/vote/user/<span class="uripart">{user-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">resource</dt>
<dd>resource identifier</dd>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">GET</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">200 OK</dt>
<dd>Vote in response body.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Mismatch of voted and authenticated user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>User has not yet voted</dd>
</dl>
<h4>Response Entities</h4>	
						

<pre class="brush: js">{
   "vote": "up"
}</pre>
						A response containing an up-vote. 
						
						
<pre class="brush: js">{
   "vote": "down"
}</pre>
						A response containing a down-vote. 
												
					<a name="N66685"></a>
<h3 class="operation">15.3 Undo a vote on a resource</h3>
<h4>Description</h4>Undos a vote that has been casted before.<h4>URI</h4>
<pre>http://core.example.foo/v2/<span class="uripart">{resource}</span>/vote/user/<span class="uripart">{user-id}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">resource</dt>
<dd>resource identifier</dd>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">DELETE</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">204 No Content</dt>
<dd>Vote has been removed.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Mismatch of voting and authenticated user.</dd>
<dt class="statuscode">404 Not Found</dt>
<dd>No vote found.</dd>
</dl>
<h4>Response Entities</h4>n/a<a name="N66510"></a>
<h3 class="operation">15.4 Vote on a resource</h3>
<h4>Description</h4>Casts a vote by the user authenticating the request.<h4>URI</h4>
<pre>http://core.example.foo/v2/<span class="uripart">{resource}</span>/vote/user/<span class="uripart">{user-id}</span>/<span class="uripart">{vote}</span>
</pre>
<h4>URI Parameters</h4>
<dl>
<dt class="uripart">resource</dt>
<dd>resource identifier</dd>
<dt class="uripart">user-id</dt>
<dd>user ID</dd>
<dt class="uripart">{vote}</dt>
<dd>up or down</dd>
</dl>
<h4>HTTP Method</h4>
<span class="method">PUT</span>
<h4>Resource Formats</h4>
<ul>
<li>n/a</li>
</ul>
<h4>Authentication</h4>required<h4>Request Entities</h4>n/a<h4>Responses</h4>
<dl>
<dt class="statuscode">202 Accepted</dt>
<dd>Vote has been casted.</dd>
<dt class="statuscode">403 Forbidden</dt>
<dd>Mismatch of voting and authenticated user.</dd>
</dl>
<h4>Response Entities</h4>n/a</body>
</html>
